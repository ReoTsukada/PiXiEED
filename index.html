<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no, viewport-fit=cover"/>
  <title>ドット絵を描くサイト | 無料ブラウザツール PiXiEED</title>
  <meta name="description" content="ドット絵を描くサイトを探している方向けのPiXiEED公式。ブラウザで使えるドット絵エディター、16×16練習ツール、ドット絵ゲームを無料で利用できます。"/>
  <meta name="keywords" content="PiXiEED,ピクシード,PiXiEEDraw,ピクシードロー,PiXFiND,ピクスファインド,ドット絵,ピクセルアート"/>
  <link rel="canonical" href="https://pixieed.jp/"/>
  <meta property="og:type" content="website"/>
  <meta property="og:site_name" content="PiXiEED（ピクシード）"/>
  <meta property="og:title" content="ドット絵を描くサイト | 無料ブラウザツール PiXiEED"/>
  <meta property="og:description" content="ブラウザで使えるドット絵エディター、16×16練習ツール、ドット絵ゲームを無料で使えるPiXiEED公式サイト。"/>
  <meta property="og:url" content="https://pixieed.jp/"/>
  <meta property="og:image" content="https://pixieed.jp/PiXiEEDogp.png"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:site" content="@PiXiEED_arta"/>
  <meta name="twitter:url" content="https://pixieed.jp/"/>
  <meta name="twitter:title" content="ドット絵を描くサイト | 無料ブラウザツール PiXiEED"/>
  <meta name="twitter:description" content="ブラウザで使えるドット絵エディター、16×16練習ツール、ドット絵ゲームを無料で使えるPiXiEED公式サイト。"/>
  <meta name="twitter:image" content="https://pixieed.jp/PiXiEEDogp.png"/>
  <link rel="icon" type="image/png" href="character-dots/mao1.png"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DotGothic16&family=Fredoka:wght@600&display=swap" rel="stylesheet">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9801602250480253" crossorigin="anonymous"></script>
  <style>
    :root{ color-scheme: dark; }
    *{ box-sizing:border-box; user-select:none; -webkit-user-select:none; -ms-user-select:none; }
    html,body{
      overflow-x:hidden;
      max-width:100vw;
    }
    body{
      margin:0 auto;
      font-family:'Fredoka','DotGothic16',system-ui,sans-serif;
      background:radial-gradient(circle at 20% 20%, rgba(59,130,246,0.22), rgba(15,23,42,1)),
                 radial-gradient(circle at 80% 0%, rgba(236,72,153,0.18), rgba(15,23,42,1)),
                 #0b1224;
      color:#e5e7eb;
      min-height:100vh;
      padding:0 14px 120px;
      width:100%;
      display:block;
      max-width:100vw;
      box-sizing:border-box;
    }
    .page{
      width:100%;
      max-width:min(1200px, 100vw);
      display:grid;
      gap:14px;
      position:relative;
      margin:0 auto;
      box-sizing:border-box;
    }
    header{
      position:sticky;
      top:0;
      z-index:70;
      background:rgba(11,18,36,0.94);
      backdrop-filter:blur(8px);
      border-bottom:1px solid rgba(255,255,255,0.08);
      margin:-20px -14px 8px;
      padding:12px 14px;
      box-sizing:border-box;
      font-family:'Fredoka','DotGothic16',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
    }
    .header-inner{
      width:100%;
      max-width:1200px;
      margin:0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      box-sizing:border-box;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:800;
      letter-spacing:0.01em;
      background:none;
      border:0;
      padding:0;
      cursor:pointer;
      color:#f9fafb;
      text-decoration:none;
      font-family:'Fredoka','DotGothic16',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
    }
    .brand-icon{
      width:34px;
      height:34px;
      border-radius:10px;
      background:rgba(255,255,255,0.12);
      padding:4px;
      border:1px solid rgba(255,255,255,0.2);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .brand-icon img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
    }
    .brand-text{ display:flex; flex-direction:column; gap:2px; }
    .brand-title{ margin:0; font-size:16px; color:#f9fafb; }
    .brand-sub{ margin:0; font-size:12px; color:#9ca3af; }

    h1{ margin:0; font-size:clamp(20px, 5.3vw, 30px); line-height:1.35; letter-spacing:0.02em; color:#f9fafb; }
    h2{ margin:0; font-size:18px; color:#f9fafb; letter-spacing:0.01em; }
    p{ margin:0; }
    .subtitle{ margin:0; color:#cbd5e1; font-size:13px; line-height:1.6; }
    .seo-links{
      margin:6px 0 0;
      color:#cbd5e1;
      font-size:13px;
      line-height:1.6;
    }
    .seo-links a{
      color:#93c5fd;
      text-decoration:none;
      font-weight:700;
    }
    .seo-links a:hover,
    .seo-links a:focus{
      color:#f9fafb;
    }

    .card,
    .section{
      background:rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.12);
      border-radius:12px;
      padding:16px;
      box-shadow:0 10px 30px rgba(0,0,0,0.3);
      width:100%;
      max-width:100%;
      box-sizing:border-box;
      overflow:hidden;
    }
    img,video,canvas,svg{
      max-width:100%;
      height:auto;
      display:block;
    }
    .section-inner{ display:grid; gap:12px; }
    .section--highlight{
      background:rgba(255,255,255,0.06);
      border-color:rgba(255,255,255,0.14);
    }
    .section-eyebrow{
      margin:0;
      font-size:12px;
      letter-spacing:0.16em;
      text-transform:uppercase;
      color:#cbd5e1;
    }
    .hero-grid{
      display:grid;
      gap:16px;
      grid-template-columns:1fr;
      align-items:start;
    }
    .hero-place{
      display:grid;
      gap:12px;
    }
    .hero-copy{
      display:grid;
      gap:12px;
    }
    .chips{ display:flex; gap:8px; flex-wrap:wrap; }
    .chip{
      border:1px solid rgba(255,255,255,0.18);
      background:transparent;
      color:#e5e7eb;
      border-radius:12px;
      padding:8px 12px;
      font-weight:700;
      font-size:12px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      text-decoration:none;
    }
    .button{
      appearance:none;
      border:0;
      border-radius:10px;
      padding:10px 14px;
      font:700 14px/1.2 'Fredoka', system-ui, sans-serif;
      cursor:pointer;
      color:#ffffff;
      background:linear-gradient(135deg, #ff719a, #ff9f43);
      box-shadow:0 4px 0 #e35c82, 0 8px 16px rgba(255,113,154,0.35);
      transition:transform 0.1s ease, filter 0.1s ease;
    }
    .button:hover,
    .button:focus-visible{ transform:translateY(-1px); filter:brightness(1.05); }
    .button--ghost{
      background:rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.2);
      color:#f9fafb;
      box-shadow:none;
    }
    .button--ghost:hover,
    .button--ghost:focus-visible{
      background:rgba(255,255,255,0.12);
      filter:none;
    }
    .hero-switch:hover,
    .hero-switch:focus-visible{
      transform:none;
    }
    .hero-switch.is-active{
      background:rgba(255,255,255,0.2);
      border-color:rgba(255,255,255,0.35);
    }
    .hero-actions{
      display:grid;
      grid-template-columns:repeat(3, minmax(0, 1fr));
      gap:8px;
    }
    .hero-actions .button{
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:100%;
      min-width:0;
      text-align:center;
    }
    .hero-draw-guide{
      display:grid;
      gap:8px;
      padding:10px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.12);
      background:rgba(15,23,42,0.4);
    }
    .hero-draw-guide[hidden]{
      display:none;
    }
    .hero-draw-guide__title{
      margin:0;
      font-size:12px;
      letter-spacing:0.08em;
      color:#cbd5e1;
    }
    .hero-draw-guide__actions{
      display:grid;
      grid-template-columns:repeat(2, minmax(0, 1fr));
      gap:8px;
    }
    .hero-draw-guide__link{
      text-decoration:none;
      color:#e5e7eb;
      border:1px solid rgba(255,255,255,0.16);
      border-radius:10px;
      background:rgba(255,255,255,0.05);
      padding:8px 10px;
      display:flex;
      align-items:center;
      gap:10px;
      transition:background 0.12s ease, border-color 0.12s ease, transform 0.12s ease;
    }
    .hero-draw-guide__icon{
      width:38px;
      height:38px;
      flex:0 0 38px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.2);
      background:rgba(2,6,18,0.85);
      padding:4px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .hero-draw-guide__icon img{
      width:100%;
      height:100%;
      object-fit:contain;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
    }
    .hero-draw-guide__text{
      font-size:12px;
      color:#cbd5e1;
      line-height:1.45;
    }
    .hero-draw-guide__link:hover,
    .hero-draw-guide__link:focus-visible{
      background:rgba(255,255,255,0.1);
      border-color:rgba(255,255,255,0.26);
      transform:translateY(-1px);
    }
    @media (max-width:700px){
      .hero-actions{
        gap:6px;
      }
      .hero-actions .button{
        padding:10px 8px;
        font-size:13px;
      }
      .hero-draw-guide{
        padding:8px;
      }
      .hero-draw-guide__actions{
        grid-template-columns:1fr;
      }
    }
    .grid{
      display:grid;
      gap:14px;
      grid-template-columns:repeat(auto-fit, minmax(260px, 1fr));
    }
    .link-card{
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.12);
      border-radius:12px;
      padding:12px;
      text-decoration:none;
      color:inherit;
      display:grid;
      gap:8px;
      box-shadow:0 8px 24px rgba(0,0,0,0.26);
      transition:transform 0.1s ease, box-shadow 0.1s ease, border-color 0.1s ease;
    }
    .link-card:hover{
      transform:translateY(-2px);
      box-shadow:0 12px 28px rgba(0,0,0,0.32);
      border-color:rgba(255,255,255,0.18);
    }
    .card.ad-strip{
      padding:8px;
      background:rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.12);
      box-shadow:0 10px 30px rgba(0,0,0,0.28);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .ad-block{
      margin:0 auto;
      border-radius:0;
      padding:0;
      background:transparent;
      border:0;
      box-shadow:none;
      position:relative;
      overflow:hidden;
      display:flex;
      justify-content:center;
      align-items:center;
      text-align:center;
      width:100%;
      max-width:min(720px, 100%);
    }
    .ad-block--home{
      padding:0;
    }
    .ad-block--home .ad-slot{
      min-height:clamp(48px, 9vw, 60px);
      height:clamp(48px, 9vw, 60px);
    }
    .ad-slot{
      display:block;
      width:100%;
      max-width:100%;
      min-height:clamp(48px, 9vw, 60px);
      height:clamp(48px, 9vw, 60px);
      margin:0 auto;
      overflow:hidden;
      line-height:0;
    }
    .ad-block .ad-slot,
    .ad-block ins.adsbygoogle{
      margin-left:auto !important;
      margin-right:auto !important;
    }
    .ad-block .ad-slot iframe,
    .ad-block ins.adsbygoogle iframe{
      margin-left:auto !important;
      margin-right:auto !important;
      height:100% !important;
      max-height:100% !important;
    }
    @media(max-width:640px){
      .ad-slot{
        min-height:clamp(48px, 9vw, 60px);
        height:clamp(48px, 9vw, 60px);
      }
      .ad-block--home .ad-slot{
        min-height:clamp(48px, 9vw, 60px);
        height:clamp(48px, 9vw, 60px);
      }
    }
    .link-thumb{
      position:relative;
      aspect-ratio:4/3;
      background:rgba(0,0,0,0.25);
      border-radius:10px;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .link-thumb--grid{
      aspect-ratio:3/2;
      padding:0;
    }
    .link-thumb__grid{
      width:100%;
      height:100%;
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      grid-auto-rows:1fr;
      gap:2px;
    }
    .link-thumb__grid > :last-child:nth-child(4){
      grid-column:2;
    }
    .link-thumb__grid img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .link-thumb__grid img[data-media="icon"]{
      object-fit:contain;
      padding:6px;
      background:rgba(2,6,18,0.8);
      image-rendering:pixelated;
      image-rendering:crisp-edges;
    }
    .link-thumb__empty{
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:11px;
      color:#cbd5e1;
      background:#000;
      letter-spacing:0.08em;
      text-align:center;
    }
    .link-thumb__empty--dev{
      color:#f9fafb;
      font-weight:700;
      letter-spacing:0.12em;
      border:1px dashed rgba(255,255,255,0.24);
      background:#000;
    }
    .link-thumb img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
    }
    .link-thumb img[data-media="icon"]{
      padding:10px;
      background:rgba(2,6,18,0.82);
      image-rendering:pixelated;
      image-rendering:crisp-edges;
    }
    .link-thumb img[data-media="ogp"]{
      image-rendering:auto;
      object-fit:cover;
    }
    .link-tag{
      position:absolute;
      top:8px;
      left:8px;
      padding:4px 8px;
      border-radius:999px;
      font-size:11px;
      font-weight:800;
      color:#0b1224;
      background:rgba(255,255,255,0.9);
    }
    .link-title{ margin:0; font-size:15px; color:#f9fafb; }
    .link-desc{ margin:0; font-size:12px; color:#cbd5e1; line-height:1.5; }
    .project-place{
      display:block;
      color:inherit;
      position:relative;
      transition:border-color 0.12s ease, box-shadow 0.12s ease;
    }
    .project-place:hover,
    .project-place:focus-visible{
      border-color:rgba(255,255,255,0.2);
      box-shadow:0 12px 32px rgba(0,0,0,0.35);
    }
    .project-place__header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
    }
    .project-place__copy{
      display:grid;
      gap:6px;
    }
    .project-place__cta{
      font-size:12px;
      font-weight:700;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.2);
      background:rgba(255,255,255,0.08);
      color:#f9fafb;
      white-space:nowrap;
      text-decoration:none;
    }
    .project-place__link{
      display:inline-flex;
      align-items:center;
      margin-top:8px;
      font-size:12px;
      font-weight:700;
      color:#93c5fd;
      text-decoration:none;
    }
    .project-place__link:hover,
    .project-place__link:focus{
      color:#f9fafb;
    }
    .project-place__body{
      display:grid;
      gap:14px;
      grid-template-columns:minmax(0, 1.2fr) minmax(0, 1fr);
      align-items:start;
    }
    .project-place__image{
      border-radius:12px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,0.12);
      background:rgba(0,0,0,0.25);
      box-shadow:0 10px 26px rgba(0,0,0,0.28);
    }
    .project-place__image.is-ready .project-place__fallback{
      display:none;
    }
    .project-place__image img{
      width:100%;
      height:auto;
      display:block;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
    }
    .project-place__canvas{
      width:100%;
      height:auto;
      display:block;
      background:transparent;
    }
    .project-place__fallback{
      width:100%;
      height:auto;
      display:block;
    }
    .project-place__detail{
      display:grid;
      gap:12px;
    }
    .project-place__group{
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.12);
      border-radius:10px;
      padding:10px 12px;
      display:grid;
      gap:8px;
    }
    .project-place__label{
      margin:0;
      font-size:11px;
      letter-spacing:0.14em;
      text-transform:uppercase;
      color:#cbd5e1;
    }
    .project-place__title{
      margin:0;
      font-size:14px;
      color:#f9fafb;
    }
    .project-place__list{
      margin:0;
      padding:0;
      list-style:none;
      display:grid;
      gap:6px;
      color:#cbd5e1;
      font-size:12px;
      line-height:1.5;
    }
    .project-place__list li{
      position:relative;
      padding-left:14px;
    }
    .project-place__list li::before{
      content:"";
      width:6px;
      height:6px;
      border-radius:50%;
      background:linear-gradient(135deg, #ff719a, #ff9f43);
      position:absolute;
      left:0;
      top:6px;
    }
    .project-place__updates{
      margin:0;
      padding:0;
      list-style:none;
      display:grid;
      gap:8px;
      font-size:12px;
      color:#cbd5e1;
    }
    .project-place__update{
      display:grid;
      gap:4px;
      padding:8px 10px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.12);
      background:rgba(0,0,0,0.28);
    }
    .project-place__update time{
      font-size:11px;
      color:#9ca3af;
    }
    .project-place__update strong{
      font-size:12px;
      color:#f9fafb;
    }
    .hub-update__link{
      color:#f9fafb;
      text-decoration:none;
      font-weight:700;
      font-size:12px;
    }
    .hub-update__link:hover,
    .hub-update__link:focus{
      color:#f9fafb;
      text-decoration:underline;
    }
    .project-place__update--empty{
      border-style:dashed;
      color:#9ca3af;
      background:rgba(255,255,255,0.04);
    }
    .public-rooms-hub{
      margin-top:4px;
    }
    .public-rooms-hub__head{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .public-rooms-hub__refresh{
      min-height:32px;
      padding:4px 12px;
      font-size:12px;
      white-space:nowrap;
    }
    .public-rooms-hub__lead{
      margin:0;
      font-size:12px;
      color:#cbd5e1;
      line-height:1.6;
    }
    .public-room-grid{
      display:grid;
      gap:10px;
      grid-template-columns:repeat(auto-fill,minmax(154px,1fr));
    }
    .public-room-card{
      display:grid;
      gap:8px;
      padding:8px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.14);
      background:rgba(0,0,0,0.28);
      color:inherit;
      text-decoration:none;
      transition:border-color 0.15s ease, box-shadow 0.15s ease, transform 0.15s ease;
    }
    .public-room-card:hover,
    .public-room-card:focus-visible{
      border-color:rgba(255,255,255,0.32);
      box-shadow:0 8px 24px rgba(0,0,0,0.35);
      transform:translateY(-1px);
      outline:none;
    }
    .public-room-thumb{
      width:100%;
      aspect-ratio:1 / 1;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.14);
      background:rgba(6,12,24,0.88);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .public-room-thumb img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
      background:transparent;
    }
    .public-room-thumb span{
      font-size:11px;
      color:#9ca3af;
      letter-spacing:0.08em;
    }
    .public-room-meta{
      display:grid;
      gap:4px;
      min-width:0;
    }
    .public-room-title{
      margin:0;
      font-size:12px;
      font-weight:700;
      color:#f9fafb;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .public-room-info{
      margin:0;
      font-size:11px;
      color:#cbd5e1;
      line-height:1.45;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .public-room-time{
      margin:0;
      font-size:10px;
      color:#94a3b8;
      letter-spacing:0.03em;
    }
    .public-room-empty{
      margin:0;
      font-size:12px;
      color:#94a3b8;
      padding:10px 6px;
      border:1px dashed rgba(255,255,255,0.2);
      border-radius:8px;
      background:rgba(255,255,255,0.03);
      grid-column:1 / -1;
    }
    .public-room-empty.is-error{
      color:#fecaca;
      border-color:rgba(252,165,165,0.45);
      background:rgba(127,29,29,0.16);
    }
    @media(max-width:640px){
      .project-place__header{ flex-direction:column; align-items:flex-start; }
      .public-rooms-hub__head{ flex-direction:column; align-items:flex-start; }
    }
    @media(max-width:900px){
      .project-place__body{ grid-template-columns:1fr; }
    }

    /* Dot gallery */
    .dot-hero{
      display:grid;
      gap:12px;
    }
    .dot-gallery__viewer{
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.16);
      background:rgba(11,18,36,0.9);
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      aspect-ratio:4/3;
      width:100%;
      box-shadow:0 12px 30px rgba(0,0,0,0.32);
    }
    .dot-gallery__viewer img{
      display:block;
      max-width:100%;
      max-height:100%;
      object-fit:contain;
      image-rendering:pixelated;
    }
    .dot-gallery__buttons{
      display:flex;
      gap:10px;
      overflow-x:auto;
      padding:8px 2px 10px;
      -webkit-overflow-scrolling:touch;
      scroll-snap-type:x proximity;
    }
    .dot-gallery__buttons::-webkit-scrollbar{ height:6px; }
    .dot-gallery__buttons::-webkit-scrollbar-thumb{
      background:rgba(255,255,255,0.35);
      border-radius:999px;
    }
    .dot-gallery__button{
      position:relative;
      flex:0 0 auto;
      width:96px;
      height:96px;
      padding:0;
      border-radius:12px;
      border:2px solid transparent;
      background:rgba(15,23,42,0.85);
      cursor:pointer;
      display:grid;
      place-items:center;
      transition:border 0.15s ease, box-shadow 0.15s ease, transform 0.15s ease;
      scroll-snap-align:center;
    }
    .dot-gallery__button.is-active{
      border-color:rgba(255,255,255,0.5);
      box-shadow:0 10px 20px rgba(0,0,0,0.28);
      transform:translateY(-2px);
    }
    .dot-gallery__button img{
      max-width:100%;
      max-height:100%;
      border-radius:9px;
      image-rendering:pixelated;
    }

    /* Character hero */
    .character-place{
      display:grid;
      gap:12px;
    }
    .character-place.is-hero{
      align-items:start;
    }
    .character-place.is-hero .section-eyebrow{
      display:none;
    }
    .character-place.is-hero .character-sprite{
      width:96px;
      height:96px;
      min-height:96px;
      padding:0;
      border:2px solid transparent;
      display:grid;
      place-items:center;
    }
    .character-place.is-hero .character-sprite img{
      width:100%;
      height:100%;
    }
    .character-place.is-hero .character-sprite span{
      display:none;
    }
    .character-place.is-hero .hero-description{
      display:none;
    }
    .swap-animate{
      animation:swapFade 240ms ease;
    }
    @keyframes swapFade{
      from{ opacity:0; transform:translateY(8px) scale(0.98); }
      to{ opacity:1; transform:translateY(0) scale(1); }
    }
    @media (prefers-reduced-motion: reduce){
      .swap-animate{ animation:none; }
    }
    .character-preview{
      margin-top:8px;
      display:grid;
      grid-template-columns:minmax(0, 1.05fr) minmax(0, 1.15fr);
      align-items:start;
      border-radius:16px;
      border:0;
      overflow:hidden;
      background:transparent;
      box-shadow:none;
      height:var(--preview-height, auto);
    }
    .character-preview__frame{
      min-height:0;
      align-self:stretch;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      background:transparent;
      position:relative;
      padding:12px;
      border:0;
      box-shadow:none;
      border-radius:0;
      overflow:visible;
    }
    .character-preview__frame.dot-gallery__viewer{
      padding:0;
      background:transparent;
      border:0;
      box-shadow:none;
      border-radius:0;
      overflow:visible;
    }
    .character-preview__details{
      min-height:0;
      align-self:stretch;
    }
    .character-place:not(.is-hero) .character-preview__frame.dot-gallery__viewer{
      height:100%;
      box-shadow:none;
      border:0;
      background:transparent;
    }
    .character-preview__frame img{
      width:100%;
      height:100%;
      max-width:100%;
      max-height:100%;
      margin:0 auto;
      display:block;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
      object-fit:contain;
      box-sizing:border-box;
      padding:1px;
      background:transparent;
    }
    .character-preview__frame img[data-trim-edge="true"]{
      clip-path:inset(0 1px);
    }
    .character-preview__placeholder{
      position:absolute;
      inset:16px;
      border:0;
      border-radius:0;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#cbd5e1;
      letter-spacing:0.12em;
      font-size:12px;
      background:transparent;
      box-shadow:none;
    }
    .character-preview__details{
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:8px;
      background:transparent;
      height:100%;
      overflow:auto;
    }
    @media (max-width:700px){
      body{
        padding:0 10px 110px;
      }
      .page{
        gap:10px;
      }
      .card,
      .section{
        padding:12px;
      }
      .section-inner{
        gap:8px;
      }
      .character-preview{
        grid-template-columns:minmax(0, 0.9fr) minmax(0, 1.1fr);
      }
      .character-preview__details{
        padding:10px;
        gap:6px;
      }
      .character-preview__frame{
        padding:8px;
      }
      .character-preview__name{ font-size:20px; }
      .character-preview__weight{ font-size:14px; }
      .character-preview__traits ul{ font-size:14px; }
      .character-preview__detail p{ font-size:14px; }
    }
    .character-preview__heading h2{ margin:0; }
    .character-preview__heading p{ margin:0.5rem 0 0; color:#cbd5e1; }
    .character-preview__name{ margin:0; font-size:22px; }
    .character-preview__weight{ margin:0; color:#cbd5e1; font-size:13px; }
    .character-preview__traits h4,
    .character-preview__detail h4{ margin:0 0 6px; }
    .character-preview__traits ul{ margin:0; padding-left:18px; color:#cbd5e1; }
    .character-preview__detail p{ margin:0; color:#cbd5e1; line-height:1.6; }
    .character-sprites__hint{
      margin:8px 0 4px;
      color:#cbd5e1;
      font-size:12px;
      text-align:center;
    }
    .character-preview__buttons{
      display:flex;
      gap:10px;
      overflow-x:auto;
      padding:8px 2px 10px;
      -webkit-overflow-scrolling:touch;
      scroll-snap-type:x proximity;
    }
    .character-preview__buttons::-webkit-scrollbar{ height:6px; }
    .character-preview__buttons::-webkit-scrollbar-thumb{
      background:rgba(255,255,255,0.35);
      border-radius:999px;
    }
    .character-sprite{
      flex:0 0 auto;
      width:96px;
      min-height:120px;
      border:1px solid rgba(255,255,255,0.2);
      border-radius:12px;
      background:rgba(15,23,42,0.85);
      padding:8px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
      cursor:pointer;
      transition:border 0.15s ease, transform 0.15s ease, box-shadow 0.15s ease;
      scroll-snap-align:center;
    }
    .character-sprite img{
      width:74px;
      height:74px;
      object-fit:contain;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
      box-sizing:border-box;
      padding:1px;
    }
    .character-sprite img[data-trim-edge="true"]{
      clip-path:inset(0 1px);
    }
    .character-sprite span{
      font-size:11px;
      color:#cbd5e1;
      text-align:center;
      line-height:1.2;
    }
    .character-sprite.is-active{
      border-color:rgba(255,255,255,0.5);
      box-shadow:0 10px 20px rgba(0,0,0,0.28);
      transform:translateY(-2px);
    }

    .bottom-nav{
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      height:68px;
      background:rgba(11,18,36,0.96);
      border-top:1px solid rgba(255,255,255,0.08);
      display:flex;
      justify-content:space-around;
      align-items:center;
      z-index:90;
      backdrop-filter:blur(8px);
    }
    .bottom-nav__item{
      flex:1;
      text-align:center;
      color:#cbd5e1;
      text-decoration:none;
      font-weight:700;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:4px;
      font-size:12px;
      padding:8px 0;
    }
    .bottom-nav__item .icon{
      width:22px;
      height:22px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }
    .bottom-nav__item .icon img{
      width:100%;
      height:100%;
      object-fit:contain;
      image-rendering:pixelated;
    }
    .bottom-nav__item.is-active{ color:#f9fafb; }
    .auth-panel{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(0,0,0,0.65);
      backdrop-filter:blur(4px);
      padding:calc(12px + env(safe-area-inset-top)) calc(12px + env(safe-area-inset-right)) calc(12px + env(safe-area-inset-bottom) + 76px) calc(12px + env(safe-area-inset-left));
      z-index:110;
    }
    .auth-panel.is-open{ display:flex; }
    .auth-card{
      width:100%;
      max-width:420px;
      max-height:calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 84px);
      background:rgba(15,23,42,0.95);
      border:1px solid rgba(255,255,255,0.14);
      border-radius:16px;
      padding:clamp(12px, 2vh, 16px);
      box-shadow:0 18px 40px rgba(0,0,0,0.45);
      display:grid;
      gap:clamp(8px, 1.6vh, 12px);
      box-sizing:border-box;
      overflow:hidden;
    }
    @supports (height: 100dvh){
      .auth-card{
        max-height:calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 84px);
      }
    }
    .auth-input{
      width:100%;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(255,255,255,0.05);
      color:#fff;
      padding:clamp(8px, 1.4vh, 10px) clamp(10px, 1.6vh, 12px);
      font-size:clamp(12px, 1.6vh, 14px);
    }
    .auth-btn{
      border:1px solid rgba(255,255,255,0.2);
      background:linear-gradient(135deg,#4f46e5,#7c3aed);
      color:#fff;
      border-radius:12px;
      padding:clamp(8px, 1.4vh, 10px) clamp(12px, 1.6vh, 14px);
      font-weight:800;
      cursor:pointer;
      text-align:center;
      font-size:clamp(12px, 1.6vh, 14px);
    }
    .close-btn{
      border:1px solid rgba(255,255,255,0.2);
      background:rgba(255,255,255,0.08);
      color:#fff;
      border-radius:8px;
      padding:6px 10px;
      cursor:pointer;
    }
    .auth-panel .profile-block{
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.08);
      border-radius:12px;
      padding:clamp(8px, 1.4vh, 12px);
      display:grid;
      gap:clamp(8px, 1.4vh, 10px);
    }
    .profile-row{
      display:flex;
      align-items:flex-end;
      gap:10px;
    }
    .profile-name{
      flex:1;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .avatar-toggle{
      width:48px;
      height:48px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.2);
      background:rgba(0,0,0,0.6);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
    }
    .avatar-toggle__img{
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .avatar-toggle__img img{
      width:80%;
      height:80%;
      object-fit:contain;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
    }
    .avatar-panel{
      border:1px solid rgba(255,255,255,0.12);
      border-radius:10px;
      padding:6px;
      background:rgba(0,0,0,0.2);
    }
    .avatar-grid{
      display:grid;
      grid-template-columns:repeat(5, minmax(0, 1fr));
      gap:clamp(4px, 1vh, 6px);
      max-height:clamp(120px, 20vh, 160px);
      overflow-y:auto;
      padding-right:4px;
      -webkit-overflow-scrolling:touch;
    }
    .avatar-option{
      border:1px solid rgba(255,255,255,0.16);
      background:rgba(0,0,0,0.65);
      border-radius:12px;
      padding:10px;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:transform 0.12s ease, border-color 0.12s ease;
    }
    .avatar-option.is-active{
      border-color:#7c3aed;
      transform:translateY(-1px);
    }
    footer{
      color:#cbd5e1;
      text-align:center;
      font-size:12px;
      display:grid;
      gap:8px;
    }
    .footer-links{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:12px;
      padding:0;
      margin:0;
      list-style:none;
    }
    .footer-links a{
      color:#cbd5e1;
      text-decoration:none;
      border:1px solid rgba(255,255,255,0.16);
      border-radius:10px;
      padding:6px 10px;
      background:rgba(255,255,255,0.04);
      font-weight:700;
      transition:transform 0.12s ease, border-color 0.12s ease, background 0.12s ease;
    }
    .footer-links a:hover,
    .footer-links a:focus-visible{
      transform:translateY(-1px);
      border-color:rgba(255,255,255,0.26);
      background:rgba(255,255,255,0.08);
    }
  </style>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SZPVXMX85G"></script>
  <script>
    const GA_MEASUREMENT_ID = 'G-SZPVXMX85G';
    const GA_PAGE_PATH = '/';
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', GA_MEASUREMENT_ID, { page_path: GA_PAGE_PATH, page_title: document.title });
    gtag('event', 'home_visit');
  </script>
  <style id="ads-safe">
  html, body {
    max-width: 100vw;
    overflow-x: hidden;
  }
  .adsbygoogle,
  ins.adsbygoogle {
    display: block !important;
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    margin: 0 auto;
    box-sizing: border-box;
    overflow: hidden;
  }
  .adsbygoogle iframe,
  ins.adsbygoogle iframe {
    display: block;
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    margin-left: auto !important;
    margin-right: auto !important;
  }

  /* global-overflow-guard */
  .ad-block,
  .ad-card,
  .ad-footer,
  .project-ad,
  .entry-ad-slot,
  .puzzle-ad-slot,
  .game-ad,
  .card--ad {
    width: min(100%, 720px) !important;
    max-width: 100% !important;
    min-width: 0 !important;
    margin-left: auto !important;
    margin-right: auto !important;
    box-sizing: border-box;
    overflow: hidden;
  }
  .ad-slot,
  .ad-block ins.adsbygoogle,
  .ad-footer ins,
  .entry-ad-slot ins,
  .puzzle-ad-slot ins.adsbygoogle,
  .game-ad ins.adsbygoogle {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    margin-left: auto !important;
    margin-right: auto !important;
    box-sizing: border-box;
    min-height: clamp(48px, 9vw, 60px) !important;
    height: clamp(48px, 9vw, 60px) !important;
    overflow: hidden !important;
  }
  .page,
  main,
  .card,
  .section,
  .panel,
  .shell {
    min-width: 0;
    max-width: 100%;
  }
</style>
  <style id="interaction-guard">
    * {
      -webkit-touch-callout: none;
      -webkit-user-drag: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    input,
    textarea,
    [contenteditable] {
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  </style>
  <script id="interaction-guard-js">
    document.addEventListener('contextmenu', (event) => {
      event.preventDefault();
    });
    document.addEventListener('dragstart', (event) => {
      event.preventDefault();
    });
  </script>
  
<script id="ads-lazy">
  (function() {
    if (window.pixieedObserveAds) return;

    const SLOT_SEQUENCE = ['2141591954','9073878884','2261515379'];
    const SLOT_KEY = 'pixieedAdSlotIndex';
    const LOAD_TIMEOUT_MS = 10000;
    const READY_POLL_MS = 250;

    let slotIndex = 0;
    let activeAd = null;
    let readyTimer = null;
    const queue = [];

    const readSlotIndex = () => {
      try {
        const stored = sessionStorage.getItem(SLOT_KEY);
        if (stored !== null) slotIndex = Number(stored) || 0;
      } catch (err) {}
    };

    const storeSlotIndex = () => {
      try {
        sessionStorage.setItem(SLOT_KEY, String(slotIndex));
      } catch (err) {}
    };

    readSlotIndex();

    const nextSlot = () => {
      if (!SLOT_SEQUENCE.length) return '';
      const slot = SLOT_SEQUENCE[slotIndex % SLOT_SEQUENCE.length];
      slotIndex += 1;
      storeSlotIndex();
      return slot;
    };

    const isReady = (ins) => (
      ins.getAttribute('data-adsbygoogle-status') === 'done' ||
      ins.getAttribute('data-ad-status') === 'filled'
    );

    const isEnqueued = (ins) => ins.dataset.adsQueueEnqueued === '1';
    const isLoading = (ins) => ins.dataset.adsQueueLoading === '1';
    const isLoaded = (ins) => ins.dataset.adsLazyLoaded === '1' || isReady(ins);

    const assignSlot = (ins) => {
      if (!ins || !(ins instanceof HTMLElement)) return;
      if (ins.dataset.adSlotAssigned === '1') return;
      const existingSlot = ins.getAttribute('data-ad-slot');
      if (existingSlot && existingSlot !== 'rotate') {
        ins.dataset.adSlotAssigned = '1';
        return;
      }
      if (ins.dataset.adStatic === '1') {
        ins.dataset.adSlotAssigned = '1';
        return;
      }
      const slot = nextSlot();
      if (slot) {
        ins.setAttribute('data-ad-slot', slot);
      }
      ins.dataset.adSlotAssigned = '1';
    };

    const clearReadyTimer = () => {
      if (!readyTimer) return;
      clearTimeout(readyTimer);
      readyTimer = null;
    };

    const releaseActiveAd = () => {
      clearReadyTimer();
      if (!activeAd) return;
      activeAd.dataset.adsQueueLoading = '';
      activeAd.dataset.adsQueueEnqueued = '';
      activeAd.dataset.adsLazyLoaded = '1';
      activeAd = null;
      processQueue();
    };

    const waitUntilReady = (ins, startedAt) => {
      if (!activeAd || activeAd !== ins) return;
      if (!document.contains(ins) || isReady(ins) || (Date.now() - startedAt) >= LOAD_TIMEOUT_MS) {
        releaseActiveAd();
        return;
      }
      readyTimer = setTimeout(() => waitUntilReady(ins, startedAt), READY_POLL_MS);
    };

    const loadAd = (ins) => {
      if (!ins || !(ins instanceof HTMLElement)) return false;
      if (isLoaded(ins) || isLoading(ins)) return true;
      assignSlot(ins);
      ins.dataset.adsQueueLoading = '1';
      ins.dataset.adsLazyLoaded = '1';
      try {
        (window.adsbygoogle = window.adsbygoogle || []).push({});
      } catch (err) {
        ins.dataset.adsQueueLoading = '';
        ins.dataset.adsLazyLoaded = '';
        return false;
      }
      return true;
    };

    const enqueueAd = (ins) => {
      if (!ins || !(ins instanceof HTMLElement)) return;
      if (isLoaded(ins) || isLoading(ins) || isEnqueued(ins)) return;
      assignSlot(ins);
      ins.dataset.adsQueueEnqueued = '1';
      queue.push(ins);
    };

    function processQueue() {
      if (activeAd) return;
      while (queue.length) {
        const ins = queue.shift();
        if (!ins || !(ins instanceof HTMLElement)) continue;
        if (!document.contains(ins)) continue;
        ins.dataset.adsQueueEnqueued = '';
        if (isLoaded(ins)) {
          ins.dataset.adsLazyLoaded = '1';
          continue;
        }
        activeAd = ins;
        const startedAt = Date.now();
        if (!loadAd(ins)) {
          activeAd = null;
          setTimeout(() => {
            if (!document.contains(ins) || isLoaded(ins)) return;
            enqueueAd(ins);
            processQueue();
          }, 1200);
          return;
        }
        waitUntilReady(ins, startedAt);
        return;
      }
    }

    const observeAds = (root) => {
      const scope = root && root.querySelectorAll ? root : document;
      scope.querySelectorAll('ins.adsbygoogle').forEach(enqueueAd);
      processQueue();
    };

    window.pixieedObserveAds = observeAds;

    const setupQueue = () => {
      observeAds(document);
    };

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', setupQueue);
    } else {
      setupQueue();
    }

    const mo = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        mutation.addedNodes.forEach((node) => {
          if (!(node instanceof HTMLElement)) return;
          if (node.matches && node.matches('ins.adsbygoogle')) {
            enqueueAd(node);
            return;
          }
          if (node.querySelectorAll) {
            node.querySelectorAll('ins.adsbygoogle').forEach(enqueueAd);
          }
        });
      });
      processQueue();
    });

    const startObserver = () => {
      if (!document.body) return;
      mo.observe(document.body, { childList: true, subtree: true });
    };

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', startObserver);
    } else {
      startObserver();
    }
  })();
</script>
<link rel="apple-touch-icon" href="/icon/PiXiEED.icon512.png"/>
</head>
<body class="with-bottom-nav">
  <div class="page">
    <header aria-label="top-nav">
      <div class="header-inner">
        <button class="brand" id="openProfilePanel" type="button" aria-label="プロフィールを開く">
          <span class="brand-icon" id="brandAvatar">
            <img src="character-dots/mao1.png" alt="logo">
          </span>
          <div class="brand-text">
            <p class="brand-title">PiXiEED</p>
            <p class="brand-sub" id="brandUser">ユーザー</p>
          </div>
        </button>
        <div></div>
      </div>
    </header>

    <section class="card" id="home-hero">
      <div class="hero-grid">
        <div class="hero-copy">
          <h1>描いて!!遊んで!!公開して!!ドット絵専用総合サイト!!</h1>
          <p class="subtitle">PiXiEED（ピクシード）は、ドット絵制作からゲーム体験、作品公開までブラウザで完結できるサイトです。</p>
          <div class="hero-actions">
            <button class="button" id="toggleDrawGuide" type="button" aria-controls="draw-guide" aria-expanded="false">描く</button>
            <button class="button button--ghost" id="togglePlayGuide" type="button" aria-controls="play-guide" aria-expanded="false">遊ぶ</button>
          </div>
          <div class="hero-draw-guide" id="draw-guide" hidden>
            <p class="hero-draw-guide__title">描く: レベルに合わせて選択</p>
            <div class="hero-draw-guide__actions">
              <a class="hero-draw-guide__link" href="projects/jerin-maker/index.html">
                <span class="hero-draw-guide__icon"><img src="icon/icon-192-5.png" alt=""></span>
                <span class="hero-draw-guide__text">PiXiEEDraw Lite（初心者向けチュートリアルでドット絵を学ぼう！！）</span>
              </a>
              <a class="hero-draw-guide__link" href="projects/pixiedraw/index.html">
                <span class="hero-draw-guide__icon"><img src="icon/icon-192-4.png" alt=""></span>
                <span class="hero-draw-guide__text">PiXiEEDraw（ピクシードロー / アニメ対応の本格ドット絵エディターを使おう！！）</span>
              </a>
            </div>
          </div>
          <div class="hero-draw-guide" id="play-guide" hidden>
            <p class="hero-draw-guide__title">遊ぶ: タイトルを選択</p>
            <div class="hero-draw-guide__actions">
              <a class="hero-draw-guide__link" href="projects/maoitu/index.html">
                <span class="hero-draw-guide__icon"><img src="icon/icon-192-3.png" alt=""></span>
                <span class="hero-draw-guide__text">まおいつ（避け続けるアクションでハイスコアを目指そう！！）</span>
              </a>
              <a class="hero-draw-guide__link" href="projects/pixfind/index.html">
                <span class="hero-draw-guide__icon"><img src="icon/icon-192-2.png" alt=""></span>
                <span class="hero-draw-guide__text">PiXFiND（ピクスファインド / ドット絵まちがい探しに挑戦しよう！！）</span>
              </a>
              <a class="hero-draw-guide__link" href="projects/pixiee-lens/index.html">
                <span class="hero-draw-guide__icon"><img src="icon/icon-192-1.png" alt=""></span>
                <span class="hero-draw-guide__text">PiXiEELENS（ドット絵変換カメラでレトロ写真を撮ろう！！）</span>
              </a>
            </div>
          </div>
        </div>
        <div class="hero-place" id="heroPlaceSlot">
          <div class="dot-hero" id="dotPlace">
            <h2>ドット絵</h2>
            <div class="dot-gallery__viewer">
              <img alt="" id="dotGalleryMain" loading="lazy" src=""/>
            </div>
            <div class="dot-gallery__buttons" id="dotGalleryButtons" aria-label="ドット絵一覧"></div>
          </div>
          </div>
        </div>
    </section>

    <!-- 公開中の部屋（ドット絵の下へ移動） -->
    <div class="project-place__group public-rooms-hub" id="publicRoomsHub">
      <div class="public-rooms-hub__head">
        <div>
          <p class="project-place__label">Open Rooms</p>
          <h3 class="project-place__title">公開中の部屋</h3>
        </div>
        <button class="chip public-rooms-hub__refresh" id="refreshPublicRooms" type="button">更新</button>
      </div>
      <p class="public-rooms-hub__lead">マスターが公開設定した部屋のみ表示されます。サムネイルを押すと視聴者として入室できます。</p>
      <div class="public-room-grid" id="publicRoomGrid" aria-live="polite">
        <p class="public-room-empty">公開中の部屋はありません。</p>
      </div>
    </div>

    <section class="section section--highlight" id="hub-intro">
      <div class="section-inner">
        <div>
          <h2>ドット絵のハブ</h2>
          <p class="subtitle">ドット絵の作り方、ドット絵ツール、ドット絵ゲーム、pixel art素材までまとめて探せるPiXiEED（ピクシード）の総合ハブです。</p>
          <div class="chips">
            <a class="chip" href="projects/pixiedraw/index.html">ドット絵を描く</a>
            <a class="chip" href="projects/jerin-maker/index.html">16×16練習</a>
            <a class="chip" href="tools.html">ツールを探す</a>
            <a class="chip" href="games.html">ゲームで遊ぶ</a>
            <a class="chip" href="portfolio/index.html">作品を見る</a>
            <a class="chip" href="#character-intro">キャラクター図鑑</a>
          </div>
        </div>

        <div class="grid">
          <a class="link-card" href="tools.html">
            <div class="link-thumb link-thumb--grid">
              <div class="link-thumb__grid">
                <img src="icon/icon-192-4.png" alt="" data-media="icon">
                <img src="icon/icon-192-5.png" alt="" data-media="icon">
                <img src="icon/icon-192-1.png" alt="" data-media="icon">
                <img src="icon/icon-192-6.png" alt="" data-media="icon">
                <span class="link-thumb__empty">追加予定</span>
                <span class="link-thumb__empty">追加予定</span>
              </div>
              <span class="link-tag">Tools</span>
            </div>
            <h3 class="link-title">ドット絵ツール一覧</h3>
            <p class="link-desc">ブラウザで使えるツールや変換ツールをまとめてチェック。</p>
          </a>
          <a class="link-card" href="games.html">
            <div class="link-thumb link-thumb--grid">
              <div class="link-thumb__grid">
                <img src="icon/icon-192-3.png" alt="" data-media="icon">
                <span class="link-thumb__empty link-thumb__empty--dev">開発中</span>
                <img src="icon/icon-192-2.png" alt="" data-media="icon">
                <span class="link-thumb__empty">追加予定</span>
                <span class="link-thumb__empty">追加予定</span>
                <span class="link-thumb__empty">追加予定</span>
              </div>
              <span class="link-tag">Games</span>
            </div>
            <h3 class="link-title">ドット絵ゲーム一覧</h3>
            <p class="link-desc">短い時間で遊べるブラウザゲームをピックアップ。</p>
          </a>
        </div>

        <div class="grid">
          <div class="project-place__group">
            <p class="project-place__label">Updates</p>
            <h3 class="project-place__title">最近の更新</h3>
            <ul class="project-place__updates" id="hubUpdates" aria-live="polite"></ul>
            <a class="project-place__link" href="notes/index.html">開発ノートまとめへ</a>
          </div>
          <div class="project-place__group">
            <p class="project-place__label">New &amp; Pick</p>
            <h3 class="project-place__title">新着ピックアップ</h3>
            <ul class="project-place__updates" id="hubLatest" aria-live="polite"></ul>
            <a class="project-place__link" href="tools.html">ツール/ゲーム一覧へ</a>
          </div>
        </div>
        <!-- publicRoomsHub moved to appear under the dot-hero section -->
        <ul class="project-place__source" id="gameGalleryItems" hidden>
          <li data-title="PiXiEED ホーム" data-image="character-dots/mao1.png" data-type="project" data-updated="2026-02-11" data-update="見出しを『描いて!!遊んで!!公開して!!ドット絵専用総合サイト!!』へ更新 / ホーム導線を再設計" data-desc="ホーム導線と見出しを分かりやすく刷新。" data-link="index.html"></li>
          <li data-title="描く / 遊ぶ 導線" data-image="icon/icon-192-4.png" data-type="project" data-updated="2026-02-11" data-update="『描く』で PiXiEEDraw Lite / PiXiEEDraw を選択可能にし、『遊ぶ』へ まおいつ・PiXFiND・PiXiEELENS を追加" data-desc="1タップで目的のツール・ゲームへ遷移できる導線に改善。" data-link="index.html"></li>
          <li data-title="ツール一覧 / ゲーム一覧" data-image="icon/icon-192-6.png" data-type="project" data-updated="2026-02-11" data-update="ホーム中段を2カード構成に整理し、各カードを6枠グリッド化（開発中 / 追加予定表示を追加）" data-desc="一覧UIを整理し、今後の追加枠も見える構成に変更。" data-link="tools.html"></li>
          <li data-title="キャラクター図鑑" data-image="character-dots/pikarin1.png" data-type="project" data-updated="2026-02-11" data-update="新キャラ追加（チカリン / キラリン / ピカリン / チャリン） / ピカリンをフレーム切替アニメ表示に対応" data-desc="キャラクター情報と表示演出を強化。" data-link="#character-intro"></li>
          <li data-title="PiXiEEDraw Lite" data-image="icon/icon-192-5.png" data-type="tool" data-updated="2026-02-11" data-update="『描く』導線の初心者向けとして案内を強化" data-desc="16×16ドットの制作とPNG保存。" data-link="projects/jerin-maker/index.html"></li>
          <li data-title="PiXiEELENS" data-image="icon/icon-192-1.png" data-type="tool" data-updated="2026-02-16" data-update="2/15: ボタン長押しGIF撮影を追加（最大2秒 / 6FPS） / 撮影後プレビューからPiXiEEDraw編集に対応 / 2/16: GIF撮影を最大5秒に拡張 / FPS設定（5・8・10・20・30）を追加 / PNG保存をドット倍率保存（x1→3倍〜x5→40倍）に対応 / 5MB超過時は倍率自動調整＋最終2倍保存に対応 / GIF保存は600x600目安・5MB制御を追加" data-desc="撮影品質・保存サイズ管理・操作性をまとめて強化し、SNS共有しやすい保存フローに改善。" data-link="projects/pixiee-lens/index.html"></li>
          <li data-title="PiXiEEDraw（共有モードβ）" data-image="icon/icon-192-4.png" data-type="tool" data-updated="2026-02-19" data-update="共有モード（マルチ）を追加（マスター/参加者、セル割当、差分同期） / 共有キー操作と役割フローを改善 / 共有タブアイコン更新 / 選択時C/PボタンをPC・横画面でも左上表示に対応" data-desc="複数人での同時制作機能をベータ導入。現在はテスト運用として継続調整中です。" data-link="projects/pixiedraw/index.html"></li>
          <li data-title="PiXiEEDraw" data-image="icon/icon-192-4.png" data-type="tool" data-updated="2026-02-15" data-update="2色描画（左=通常色 / 右=サブ色）を追加 / Hueリング+SVマップ改善 / 円ツール計算と横画面レイアウトを調整" data-desc="描画操作とカラーピッカー精度、横画面の使い勝手を改善。" data-link="projects/pixiedraw/index.html"></li>
          <li data-title="PiXiEEDraw（対称モード刷新）" data-image="icon/icon-192-4.png" data-type="tool" data-updated="2026-02-17" data-update="ミラーモードを実装（左右/上下/斜め2軸） / 4軸同時ON / 対称ラインつまみ移動 / グリッド基準調整 / 親子ボタン挙動を整理" data-desc="対称描画を実制作向けに強化。軸移動と同時反映に対応。" data-link="projects/pixiedraw/index.html"></li>
          <li data-title="PiXiEEDraw（UI/操作改善）" data-image="icon/icon-192-4.png" data-type="tool" data-updated="2026-02-17" data-update="モバイル・横画面でツール並びを統一 / レール・つまみ・ギャップを統一 / 影や不要装飾を削減 / ツール再編（スポイト・仮想カーソル独立） / PixFiNDを設定トグル化" data-desc="軽量化と操作導線を優先したUIへ再調整。" data-link="projects/pixiedraw/index.html"></li>
          <li data-title="PiXiEEDraw（安全性と導線）" data-image="icon/icon-192-4.png" data-type="tool" data-updated="2026-02-17" data-update="Aseprite系ショートカットを拡充 / ショートカット一覧を追加 / 未保存状態の離脱警告 / 出力後広告クローズ時に他ツール紹介ポップを追加 / 更新情報パネルを追加（直近1年表示）" data-desc="作業継続しやすい操作性と案内導線を強化。" data-link="projects/pixiedraw/index.html"></li>
        </ul>
      </div>
    </section>

    <section class="card">
      <h2>ドット絵エディター</h2>
      <p class="seo-links">ブラウザで描ける <a href="projects/pixiedraw/index.html">ドット絵エディター PiXiEEDraw（ピクシードロー）</a> と、16×16練習向けの <a href="projects/jerin-maker/index.html">16×16ドット絵ツール PiXiEEDraw Lite</a> を紹介しています。</p>
    </section>

    <section class="card ad-strip" aria-label="広告">
      <div class="ad-block ad-block--home">
        <ins class="adsbygoogle ad-slot"
             style="display:block"
             data-ad-client="ca-pub-9801602250480253"
             data-ad-slot="2141591954"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
      </div>
    </section>

    <section class="section section--highlight" id="character-intro">
      <div class="section-inner" id="characterPlaceSlot">
        <div class="character-place" id="characterPlace">
          <p class="section-eyebrow">Original Character Workbench</p>
          <div class="character-preview__heading">
            <h2>キャラクター</h2>
            <p hidden>ここではジェリンを中心としてオリジナルキャラクターの紹介をしています。ゲームのシリーズに登場します。</p>
          </div>
          <div aria-live="polite" class="character-preview">
            <div class="character-preview__frame dot-gallery__viewer">
              <img alt="" hidden id="characterGalleryMain" loading="lazy" src=""/>
              <div class="character-preview__placeholder" id="characterGalleryPlaceholder">
                <small id="characterPlaceholderMeta">差し替え待ち</small>
              </div>
            </div>
            <div class="character-preview__details" id="characterPreviewDetails">
              <h3 class="character-preview__name" id="characterGalleryName">キャラクターA（仮）</h3>
              <p class="character-preview__weight" id="characterGalleryWeight">Weight: 調整中</p>
              <div class="character-preview__traits">
                <h4>特徴</h4>
                <ul id="characterTraits">
                  <li>特徴メモ</li>
                </ul>
              </div>
              <div class="character-preview__detail">
                <h4>詳細</h4>
                <p id="characterGalleryDetail">選択したキャラクターの詳細がここに表示されます。</p>
              </div>
            </div>
          </div>
          <p class="character-sprites__hint" hidden>下のPNGをクリックするとプレビューと詳細が切り替わります。</p>
          <div aria-label="キャラクター一覧" class="character-preview__buttons dot-gallery__buttons" id="characterGalleryButtons" role="listbox"></div>
          <p class="hero-description" id="heroCharacterDescription" hidden></p>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>コンタクト</h2>
      <p class="subtitle">ドット絵制作・pixel art commission、ブラウザゲーム用アセット制作、業務委託・コラボの相談はこちら。</p>
      <div class="chips">
        <a class="button" href="mailto:pixieed.arta@gmail.com">メールで相談する</a>
        <a class="button" href="https://x.com/PiXiEED_arta" target="_blank" rel="noopener">公式X</a>
      </div>
    </section>

    <footer>
      <p>© <span id="year"></span> PiXiEED. All rights reserved.</p>
      <div class="footer-links">
        <a href="terms/index.html">利用規約</a>
        <a href="privacy/index.html">プライバシーポリシー</a>
      </div>
    </footer>
  </div>

  <nav class="bottom-nav">
    <a class="bottom-nav__item is-active" data-tab="home" href="./index.html">
      <span class="icon"><img src="FooterIcon1.png" alt=""/></span><span>ホーム</span>
    </a>
    <a class="bottom-nav__item" data-tab="tools" href="tools.html">
      <span class="icon"><img src="FooterIcon3.png" alt=""/></span><span>ツール/ゲーム</span>
    </a>
    <a class="bottom-nav__item" data-tab="lens" href="projects/pixiee-lens/index.html">
      <span class="icon"><img src="FooterIcon5.png" alt=""/></span><span>PiXiEELENS</span>
    </a>
    <a class="bottom-nav__item" data-tab="portfolio" href="portfolio/index.html">
      <span class="icon"><img src="FooterIcon4.png" alt=""/></span><span>企業向け</span>
    </a>
  </nav>

  <div class="auth-panel" id="authPanel" aria-hidden="true">
    <div class="auth-card">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
        <h3 style="margin:0;font-size:16px;color:#f9fafb;">プロフィール</h3>
        <button class="close-btn" type="button" id="closeAuthPanel">閉じる</button>
      </div>
      <div class="profile-block">
        <div class="profile-row">
          <button class="avatar-toggle" id="avatarToggle" type="button" aria-label="アイコンを変更" aria-expanded="false" aria-controls="avatarPanel">
            <span class="avatar-toggle__img" id="avatarPreview"></span>
          </button>
          <label class="profile-name">
            <span style="font-weight:700; color:#e5e7eb;">ニックネーム</span>
            <input class="auth-input" id="profileNickname" type="text" placeholder="なまえ" maxlength="32">
          </label>
        </div>
        <div class="avatar-panel" id="avatarPanel" hidden>
          <div class="avatar-grid" id="avatarGrid"></div>
        </div>
        <label class="profile-name">
          <span style="font-weight:700; color:#e5e7eb;">X / リンク</span>
          <input class="auth-input" id="profileX" type="url" placeholder="https://x.com/username または https://example.com" maxlength="200" inputmode="url">
        </label>
        <button class="auth-btn" id="saveProfile" type="button">プロフィールを保存</button>
      </div>
      <div class="profile-block">
        <p class="helper" id="authStatus"></p>
      </div>
    </div>
  </div>

  <script>
    (function(){
      function loadNickname(){ try{ return localStorage.getItem('pixieed_nickname') || ''; }catch(_){ return ''; } }
      function loadAvatar(){ try{ return localStorage.getItem('pixieed_avatar') || 'mao'; }catch(_){ return 'mao'; } }
      function saveNickname(name){ try{ localStorage.setItem('pixieed_nickname', name); }catch(_){ } }
      function saveAvatar(id){ try{ localStorage.setItem('pixieed_avatar', id); }catch(_){ } }
      function loadXUrl(){ try{ return localStorage.getItem('pixieed_x_url') || ''; }catch(_){ return ''; } }
      function normalizeXUrl(value){
        const raw = String(value || '').trim();
        if(!raw) return '';
        if(/^https?:\/\//i.test(raw)){
          try{
            return new URL(raw).toString();
          }catch(_){}
          return '';
        }
        if(/^[a-z0-9.-]+\.[a-z]{2,}(\/.*)?$/i.test(raw)){
          try{
            return new URL(`https://${raw}`).toString();
          }catch(_){}
          return '';
        }
        const handle = raw.replace(/^@+/, '').trim();
        if(!handle) return '';
        const candidate = /^(x\.com|twitter\.com)\//i.test(handle)
          ? `https://${handle}`
          : `https://x.com/${handle}`;
        try{
          return new URL(candidate).toString();
        }catch(_){}
        return '';
      }
      function saveXUrl(value){
        try{
          const normalized = normalizeXUrl(value);
          if(normalized){
            localStorage.setItem('pixieed_x_url', normalized);
          }else{
            localStorage.removeItem('pixieed_x_url');
          }
        }catch(_){ }
      }
      const AVATARS = {
        mao:'character-dots/mao1.png',
        jerin1:'character-dots/Jerin1.png',
        jerin2:'character-dots/Jerin2.png',
        jerin3:'character-dots/Jerin3.png',
        jerin4:'character-dots/Jerin4.png',
        jerin5:'character-dots/Jerin5.png',
        jerin6:'character-dots/Jerin6.png',
        jerin7:'character-dots/Jerin7.png',
        jerin8:'character-dots/Jerin8.png',
        jellnall1:'character-dots/JELLNALL1.png',
        jellnall2:'character-dots/JELLNALL2.png',
        jellnall3:'character-dots/JELLNALL3.png',
        jellnall4:'character-dots/JELLNALL4.png',
        jellnall5:'character-dots/JELLNALL5.png',
        jellnall6:'character-dots/JELLNALL6.png',
        jellnall7:'character-dots/JELLNALL7.png',
        jellnall8:'character-dots/JELLNALL8.png',
        jellnall9:'character-dots/JELLNALL9.png',
        jellnall10:'character-dots/JELLNALL10.png',
        jellnall11:'character-dots/JELLNALL11.png',
        jellnall12:'character-dots/JELLNALL12.png',
        jellnall13:'character-dots/JELLNALL13.png',
        jellnall14:'character-dots/JELLNALL14.png',
        jellnall15:'character-dots/JELLNALL15.png',
        jellnall16:'character-dots/JELLNALL16.png',
        jellnall17:'character-dots/JELLNALL17.png',
        jellnall18:'character-dots/JELLNALL18.png',
        jellnall19:'character-dots/JELLNALL19.png',
        baburin:'character-dots/baburinpng.png'
      };
      function applyAvatar(){
        const brand = document.getElementById('brandAvatar');
        const preview = document.getElementById('avatarPreview');
        const avatar = loadAvatar();
        const src = AVATARS[avatar] || AVATARS.mao;
        if(brand){ brand.innerHTML = `<img src="${src}" alt="avatar">`; }
        if(preview){ preview.innerHTML = `<img src="${src}" alt="avatar">`; }
        const nick = loadNickname();
        const sub = document.getElementById('brandUser');
        if(sub){ sub.textContent = nick || 'ユーザー'; }
      }
      function renderAvatarChoices(){
        const grid = document.getElementById('avatarGrid');
        if(!grid) return;
        grid.innerHTML = '';
        const current = loadAvatar();
        Object.entries(AVATARS).forEach(([id, src]) => {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = `avatar-option${current === id ? ' is-active' : ''}`;
          btn.style.background = 'rgba(0,0,0,0.7)';
          const im = document.createElement('img');
          im.src = src;
          im.alt = id;
          im.style.width = '80%';
          im.style.height = '80%';
          im.style.objectFit = 'contain';
          im.style.pointerEvents = 'none';
          im.style.imageRendering = 'pixelated';
          im.style.imageRendering = 'crisp-edges';
          btn.appendChild(im);
          btn.addEventListener('click', () => {
            saveAvatar(id);
            renderAvatarChoices();
            applyAvatar();
            const panel = document.getElementById('avatarPanel');
            const toggle = document.getElementById('avatarToggle');
            if(panel){
              panel.hidden = true;
            }
            if(toggle){
              toggle.setAttribute('aria-expanded','false');
            }
          });
          grid.appendChild(btn);
        });
      }
      function setupAvatarToggle(){
        const toggle = document.getElementById('avatarToggle');
        const panel = document.getElementById('avatarPanel');
        if(!toggle || !panel) return;
        const setOpen = (open) => {
          panel.hidden = !open;
          toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
        };
        setOpen(false);
        toggle.addEventListener('click', () => {
          setOpen(panel.hidden);
        });
      }
      function setupProfileModal(){
        const openBtn = document.getElementById('openProfilePanel');
        const panel = document.getElementById('authPanel');
        const closeBtn = document.getElementById('closeAuthPanel');
        const saveBtn = document.getElementById('saveProfile');
        const nickInput = document.getElementById('profileNickname');
        const xInput = document.getElementById('profileX');
        const status = document.getElementById('authStatus');
        const toggle = (open) => {
          if(!panel) return;
          if(open){
            if(nickInput) nickInput.value = loadNickname();
            if(xInput) xInput.value = loadXUrl();
            renderAvatarChoices();
            panel.classList.add('is-open');
            panel.setAttribute('aria-hidden','false');
          }else{
            panel.classList.remove('is-open');
            panel.setAttribute('aria-hidden','true');
          }
        };
        if(openBtn) openBtn.addEventListener('click', () => toggle(true));
        if(closeBtn) closeBtn.addEventListener('click', () => toggle(false));
        if(panel){ panel.addEventListener('click', (e) => { if(e.target === panel) toggle(false); }); }
        if(saveBtn){
          saveBtn.addEventListener('click', () => {
            const nick = (nickInput?.value || '').trim();
            const xUrl = normalizeXUrl(xInput?.value || '');
            if(nick){ saveNickname(nick); }
            saveXUrl(xUrl);
            applyAvatar();
            if(status) status.textContent = 'プロフィールを保存しました';
          });
        }
      }
      function setupHeroPlaceSwap(){
        const heroSlot = document.getElementById('heroPlaceSlot');
        const characterSlot = document.getElementById('characterPlaceSlot');
        const dotPlace = document.getElementById('dotPlace');
        const characterPlace = document.getElementById('characterPlace');
        const toggleBtn = document.getElementById('toggleHeroPlace');
        const heroDesc = document.getElementById('heroCharacterDescription');
        const nameEl = document.getElementById('characterGalleryName');
        const detailEl = document.getElementById('characterGalleryDetail');
        if(
          !heroSlot ||
          !characterSlot ||
          !dotPlace ||
          !characterPlace ||
          !toggleBtn
        ) return;

        const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        let latestDescription = '';
        let typeTimer = null;
        const setActiveButtons = (showCharacter) => {
          toggleBtn.setAttribute('aria-pressed', showCharacter ? 'true' : 'false');
          toggleBtn.classList.toggle('is-active', showCharacter);
          toggleBtn.textContent = showCharacter ? 'ドット絵' : 'キャラクター';
          // When showing character in hero, the toggle should jump to character section.
          toggleBtn.setAttribute('href', showCharacter ? '#character-intro' : '#home-hero');
        };
        const animateSwap = (element) => {
          if(!element) return;
          element.classList.remove('swap-animate');
          void element.offsetWidth;
          element.classList.add('swap-animate');
          window.setTimeout(() => {
            element.classList.remove('swap-animate');
          }, 260);
        };
        const buildDescription = (data = {}) => {
          const name = String(data.name || '').trim();
          const detail = String(data.detail || data.description || data.background || '').trim();
          if(name && detail) return `${name}：${detail}`;
          return detail || name;
        };
        const getCurrentDescriptionFromDom = () => {
          const name = String(nameEl?.textContent || '').trim();
          const detail = String(detailEl?.textContent || '').trim();
          return buildDescription({ name, detail }) || 'キャラクターの説明を準備中です。';
        };
        const typeHeroText = (text, options = {}) => {
          if(!heroDesc) return;
          const content = String(text || '').trim();
          if(!content){
            heroDesc.textContent = '';
            heroDesc.hidden = true;
            return;
          }
          heroDesc.hidden = false;
          if(typeTimer){
            clearTimeout(typeTimer);
            typeTimer = null;
          }
          if(options.animate === false || prefersReducedMotion){
            heroDesc.textContent = content;
            return;
          }
          heroDesc.textContent = '';
          let index = 0;
          const step = () => {
            heroDesc.textContent += content.charAt(index++);
            if(index < content.length){
              typeTimer = window.setTimeout(step, 18);
            }
          };
          step();
        };
        const applyHeroDescription = (animate = true) => {
          if(!heroDesc) return;
          if(heroSlot.contains(characterPlace)){
            if(!latestDescription){
              latestDescription = getCurrentDescriptionFromDom();
            }
            typeHeroText(latestDescription, { animate });
          }else{
            heroDesc.textContent = '';
            heroDesc.hidden = true;
          }
        };
        const handleCharacterUpdate = (data = {}) => {
          latestDescription = buildDescription(data);
          if(!latestDescription){
            latestDescription = getCurrentDescriptionFromDom();
          }
          if(heroSlot.contains(characterPlace)){
            typeHeroText(latestDescription, { animate: true });
          }
        };
        const setState = (showCharacter, options = {}) => {
          const { animate = true } = options;
          if(showCharacter){
            heroSlot.appendChild(characterPlace);
            characterSlot.appendChild(dotPlace);
            characterPlace.classList.add('is-hero');
            setActiveButtons(true);
            if(animate){
              animateSwap(characterPlace);
              animateSwap(dotPlace);
            }
            applyHeroDescription(animate);
            window.requestAnimationFrame(syncHeroPreviewHeights);
            return;
          }
          heroSlot.appendChild(dotPlace);
          characterSlot.appendChild(characterPlace);
          characterPlace.classList.remove('is-hero');
          setActiveButtons(false);
          if(animate){
            animateSwap(dotPlace);
          }
          applyHeroDescription(false);
          window.requestAnimationFrame(syncHeroPreviewHeights);
        };

        toggleBtn.addEventListener('click', (event) => {
          event.preventDefault();
          const isShowingCharacter = heroSlot.contains(characterPlace);
          setState(!isShowingCharacter);
        });
        window.addEventListener('pixieed:characterSelected', (event) => {
          handleCharacterUpdate(event?.detail || {});
        });
        if(window.__PIXIEED_CURRENT_CHARACTER){
          latestDescription = buildDescription(window.__PIXIEED_CURRENT_CHARACTER);
        }
        setState(false, { animate: false });
      }
      function setupHeroGuideToggles(){
        const pairs = [
          {
            button: document.getElementById('toggleDrawGuide'),
            guide: document.getElementById('draw-guide')
          },
          {
            button: document.getElementById('togglePlayGuide'),
            guide: document.getElementById('play-guide')
          }
        ].filter((pair) => pair.button && pair.guide);
        if(!pairs.length) return;

        const setOpen = (targetPair, open, options = {}) => {
          pairs.forEach((pair) => {
            const isTarget = pair === targetPair;
            const shouldOpen = isTarget ? open : false;
            pair.guide.hidden = !shouldOpen;
            pair.button.setAttribute('aria-expanded', shouldOpen ? 'true' : 'false');
          });
          if(open && options.scroll){
            window.requestAnimationFrame(() => {
              targetPair.guide.scrollIntoView({ behavior:'smooth', block:'nearest' });
            });
          }
        };

        pairs.forEach((pair) => {
          setOpen(pair, false);
          pair.button.addEventListener('click', () => {
            const nextOpen = pair.guide.hidden;
            setOpen(pair, nextOpen, { scroll:true });
          });
        });
      }
      function syncHeroPreviewHeights(){
        const previews = document.querySelectorAll('.character-place .character-preview');
        previews.forEach((preview) => {
          const frame = preview.querySelector('.character-preview__frame');
          if (!frame) return;
          const width = frame.getBoundingClientRect().width;
          if (!width) return;
          const height = Math.round(width * 0.75);
          preview.style.setProperty('--preview-height', `${height}px`);
        });
      }
      document.addEventListener('DOMContentLoaded', () => {
        applyAvatar();
        setupAvatarToggle();
        setupProfileModal();
        setupHeroGuideToggles();
        setupHeroPlaceSwap();
        syncHeroPreviewHeights();
        window.addEventListener('resize', syncHeroPreviewHeights);
        const y = document.getElementById('year');
        if(y) y.textContent = new Date().getFullYear();
      });
    })();
  </script>
  <script src="scripts.js"></script>
  <script src="portfolio/dots/manifest.js"></script>
  <script src="scripts/gallery.js"></script>
  <script src="character-dots/manifest.js"></script>
  <script src="scripts/character-gallery.js"></script>
  <script src="scripts/game-gallery.js"></script>
  <script type="module">
    // Homepage: probe pre-defined rooms and show those that are currently active
    const MULTI_SUPABASE_MODULE_URL = 'https://esm.sh/@supabase/supabase-js@2.46.1?bundle';
    const MULTI_SUPABASE_URL = 'https://kyyiuakrqomzlikfaire.supabase.co';
    const MULTI_SUPABASE_ANON_KEY = 'sb_publishable_gnc61sD2hZvGHhEW8bQMoA_lrL07SN4';

    async function probeAndRenderRooms(){
      const grid = document.getElementById('publicRoomGrid');
      if (!grid) return;
      grid.innerHTML = '<p class="public-room-empty">公開中の部屋を読み込み中…</p>';
      try{
        const res = await fetch('rooms.json');
        const rooms = await res.json();
        const mod = await import(MULTI_SUPABASE_MODULE_URL);
        const supabase = mod.createClient(MULTI_SUPABASE_URL, MULTI_SUPABASE_ANON_KEY, { realtime: { params: { eventsPerSecond: 48 } } });

        const active = [];
        // probe each room by temporarily subscribing to its channel and sending status-request
        await Promise.all(rooms.map(async (r) => {
          const ch = supabase.channel(r.channel);
          let saw = false;
          let thumb = null;
          ch.on('broadcast', { event: 'status-response' }, ({payload})=>{
            try{ if (!payload) return; if (payload.room === r.channel){ saw = true; if (payload.data) thumb = payload.data; } }catch(e){}
          });
          try{ await ch.subscribe(); }catch(e){}
          try{ await ch.send({ type:'broadcast', event:'status-request', payload:{ room: r.channel, ts: Date.now() } }); }catch(e){}
          await new Promise(res=>setTimeout(res, 700));
          try{ await ch.unsubscribe(); }catch(e){}
          if (saw) active.push(Object.assign({}, r, { thumbnail: thumb }));
          else if (r.type === 'resident'){
            // resident rooms should be listed even when empty
            active.push(Object.assign({}, r, { thumbnail: null }));
          }
        }));

        grid.innerHTML = '';
        if (!active.length){ grid.innerHTML = '<p class="public-room-empty">公開中の部屋はありません。</p>'; return; }
        for (const r of active){
          const card = document.createElement('div');
          card.className = 'public-room-card';
          // determine thumbnail/placeholder
          const thumbHtml = r.thumbnail
            ? `<div class="public-room-thumb"><img src="${r.thumbnail}" alt="${r.name} thumbnail" loading="lazy" /></div>`
            : `<div class="public-room-thumb"><span>ROOM</span></div>`;

          // action area: public rooms link to public-room, resident rooms either show 入室 if active or 建てる if empty
          let actionHtml = '';
          if (r.type === 'public'){
            const href = `/public-room.html?room=${encodeURIComponent(r.channel)}`;
            actionHtml = `<a class="public-room-action button" href="${href}">入室</a>`;
          } else if (r.type === 'resident'){
            const page = r.page || '/resident-216.html';
            const roomQuery = `?room=${encodeURIComponent(r.channel)}`;
            if (r.thumbnail){
              // active: let user enter
              actionHtml = `<a class="public-room-action button" href="${page}${roomQuery}">入室</a>`;
            } else {
              // not active: show 建てる button which opens the room page (first entrant will start it)
              actionHtml = `<a class="public-room-action button button--ghost" href="${page}${roomQuery}">建てる</a>`;
            }
          }

          const metaInfo = `
            <div class="public-room-meta">
              <div class="public-room-title">${r.name}</div>
              <div class="public-room-info">${r.description || ''}</div>
              <div class="public-room-meta-extra">${r.size ? r.size + ' · ' : ''}${r.maxUsers ? '最大 ' + r.maxUsers + ' 人' : ''}</div>
              <div class="public-room-time">${new Date().toLocaleString()}</div>
              <div style="margin-top:8px;">${actionHtml}</div>
            </div>`;

          card.innerHTML = `${thumbHtml}${metaInfo}`;
          grid.appendChild(card);
        }
      }catch(e){ console.error('probe rooms failed', e); grid.innerHTML = '<p class="public-room-empty is-error">公開中の部屋の読み込みに失敗しました</p>'; }
    }

    document.getElementById('refreshPublicRooms').addEventListener('click', ()=>{ probeAndRenderRooms(); });
    probeAndRenderRooms();
  </script>
</body>
</html>
