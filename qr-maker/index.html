<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>QRコードメーカー | PiXiEED</title>
<meta content="URLやテキストをブラウザ上で即座にQRコード化。サイズ・余白・誤り訂正・色を調整してPNG保存できる軽量ツールです。" name="description"/>
<meta content="website" property="og:type"/>
<meta content="QRコードメーカー | PiXiEED" property="og:title"/>
<meta content="URLやテキストをブラウザ上で即座にQRコード化。サイズ・余白・誤り訂正・色を調整してPNG保存できる軽量ツールです。" property="og:description"/>
<meta content="https://pixieed.jp/qr-maker/qrogp.png" property="og:image"/>
<meta content="https://pixieed.jp/qr-maker/" property="og:url"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="https://pixieed.jp/qr-maker/qrogp.png" name="twitter:image"/>
<meta content="#080d1f" name="theme-color"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=DotGothic16&family=Fredoka:wght@600&display=swap" rel="stylesheet"/>
<link href="../character-dots/mao1.png" rel="icon" type="image/png"/>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SZPVXMX85G"></script>
<script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9801602250480253"></script>
<script>
  const GA_MEASUREMENT_ID = 'G-SZPVXMX85G';
  const GA_PAGE_PATH = '/qr-maker/';
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', GA_MEASUREMENT_ID, {
    page_path: GA_PAGE_PATH,
    page_title: document.title
  });
  gtag('event', 'project_open', {
    project_slug: 'qr-maker',
    project_type: 'tool',
    project_name: 'QRコードメーカー'
  });
  gtag('event', 'qr_maker_open');
  </script>
<style>
  :root {
    color-scheme: dark;
    --bg: radial-gradient(circle at 20% 20%, rgba(59,130,246,0.22), rgba(15,23,42,1)),
           radial-gradient(circle at 80% 0%, rgba(236,72,153,0.18), rgba(15,23,42,1)),
           #0b1224;
    --panel: rgba(255,255,255,0.05);
    --panel-strong: rgba(255,255,255,0.06);
    --border: rgba(255,255,255,0.12);
    --accent: #ff9f43;
    --accent-2: #ff719a;
    --text: #e5e7eb;
    --muted: #cbd5e1;
    --input: rgba(0,0,0,0.35);
    --shadow: 0 10px 30px rgba(0,0,0,0.3);
    --radius: 12px;
    --gap: 14px;
    font-family: 'Fredoka', 'DotGothic16', system-ui, sans-serif;
  }
  * {
    box-sizing: border-box;
    user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
  }
  html, body {
    max-width: 100vw;
    overflow-x: hidden;
  }
  body {
    margin: 0 auto;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    padding: 0 14px 120px;
    width: 100%;
    display: block;
  }
  textarea, input, select { user-select: text; -webkit-user-select: text; }
  a { color: var(--accent); text-decoration: none; }
  a:hover { text-decoration: underline; }
  .page {
    width: 100%;
    max-width: min(1200px, 100vw);
    display: grid;
    gap: 14px;
    margin: 0 auto;
    position: relative;
  }
  header {
    position: sticky;
    top: 0;
    z-index: 70;
    background: rgba(11,18,36,0.94);
    backdrop-filter: blur(8px);
    border-bottom: 1px solid rgba(255,255,255,0.08);
    margin: -20px -14px 8px;
    padding: 10px 14px;
  }
  .header-inner {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }
  .brand {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 800;
    letter-spacing: 0.01em;
    background: none;
    border: 0;
    padding: 0;
    cursor: pointer;
    color: #f9fafb;
    text-decoration: none;
  }
  .brand-icon {
    width: 34px;
    height: 34px;
    border-radius: 10px;
    background: rgba(255,255,255,0.12);
    padding: 4px;
    border: 1px solid rgba(255,255,255,0.2);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }
  .brand-icon img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
    image-rendering: pixelated;
    image-rendering: crisp-edges;
  }
  .brand-text {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }
  .brand-title { margin: 0; font-size: 16px; color: #f9fafb; }
  .brand-sub { margin: 0; font-size: 12px; color: #9ca3af; }
  h1 { margin: 0; font-size: 22px; letter-spacing: 0.02em; color: #f9fafb; }
  .subtitle { margin: 0; color: var(--muted); font-size: 12px; line-height: 1.6; }
  .header-actions {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .header-actions .btn {
    white-space: nowrap;
    padding: 8px 12px;
    font-size: 0.88rem;
  }
  .btn {
    appearance: none;
    border: 0;
    border-radius: 10px;
    padding: 10px 14px;
    font: 700 14px/1.2 'Fredoka', system-ui, sans-serif;
    cursor: pointer;
    color: #ffffff;
    background: linear-gradient(135deg, #ff719a, #ff9f43);
    box-shadow: 0 4px 0 #e35c82, 0 8px 16px rgba(255,113,154,0.35);
    transition: transform 0.1s ease, filter 0.1s ease;
  }
  .btn:hover,
  .btn:focus-visible {
    transform: translateY(-1px);
    filter: brightness(1.05);
    outline: none;
  }
  .btn.secondary {
    background: transparent;
    border: 1px solid rgba(255,255,255,0.18);
    color: #e5e7eb;
    box-shadow: none;
  }
  .qr-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 14px;
    min-height: 0;
  }
  .card,
  .panel {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  }
  [hidden] {
    display: none !important;
  }
  .panel-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
  }
  .mode-switch {
    display: inline-flex;
    gap: 6px;
    padding: 4px;
    border-radius: 12px;
    background: rgba(9, 14, 28, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.06);
  }
  .mode-btn {
    appearance: none;
    border: 1px solid rgba(255, 255, 255, 0.12);
    background: rgba(255, 255, 255, 0.06);
    color: var(--muted);
    border-radius: 9px;
    padding: 6px 12px;
    font-weight: 700;
    cursor: pointer;
  }
  .mode-btn.is-active {
    background: linear-gradient(135deg, rgba(255, 113, 154, 0.6), rgba(255, 159, 67, 0.5));
    color: #0b1224;
    border-color: transparent;
  }
  .mode-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 8px;
  }
  .hash-text {
    font-size: 0.85rem;
    word-break: break-all;
  }
  .panel h2,
  .card h2 {
    margin: 0 0 8px;
    font-size: 18px;
    letter-spacing: 0.02em;
    color: #f9fafb;
  }
  .panel p,
  .card p {
    margin: 0 0 14px;
    color: var(--muted);
    line-height: 1.6;
  }
  label {
    display: block;
    font-weight: 700;
    margin-bottom: 6px;
    letter-spacing: 0.01em;
  }
  textarea, select, input[type="color"], input[type="range"] {
    width: 100%;
    font-family: inherit;
  }
  textarea, select {
    background: var(--input);
    border: 1px solid rgba(255,255,255,0.18);
    color: #f9fafb;
    border-radius: 12px;
    padding: 12px;
    font-size: 1rem;
    transition: border-color 0.12s ease, box-shadow 0.12s ease;
  }
  textarea:focus, select:focus {
    outline: none;
    border-color: rgba(255,159,67,0.6);
    box-shadow: 0 0 0 3px rgba(255,159,67,0.18);
  }
  textarea {
    resize: vertical;
    min-height: 120px;
  }
  .field-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 12px;
    margin: 12px 0;
  }
  .range-stack {
    display: grid;
    gap: 8px;
  }
  .range-stack label {
    margin-bottom: 0;
  }
  .range-wrap {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 10px;
    align-items: center;
  }
  input[type="range"] {
    accent-color: var(--accent);
  }
  .range-value {
    color: var(--muted);
    font-weight: 600;
    min-width: 64px;
    text-align: right;
  }
.color-field {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
  }
  input[type="color"] {
    background: none;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    width: 70px;
    height: 52px;
    cursor: pointer;
    padding: 0;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05), 0 6px 18px rgba(0,0,0,0.28);
  }
  .meta-row {
    display: flex;
    justify-content: space-between;
    gap: 12px;
    color: var(--muted);
    font-size: 0.92rem;
  }
  .meta-row span {
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }
  .status {
    font-weight: 700;
    color: var(--accent);
  }
  .qr-preview {
    display: grid;
    grid-template-rows: auto 1fr auto;
    gap: 14px;
  }
  .qr-canvas {
    background: rgba(0,0,0,0.35);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: clamp(10px, 1.5vw, 14px);
    min-height: 260px;
  }
  canvas {
    width: min(100%, 300px);
    height: auto;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 14px 30px rgba(0, 0, 0, 0.3);
    image-rendering: pixelated;
    image-rendering: crisp-edges;
  }
  .qr-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }
  .small {
    font-size: 0.9rem;
    color: var(--muted);
  }
  .ad-block {
    border: 1px dashed rgba(255,255,255,0.2);
    border-radius: 12px;
    background: linear-gradient(150deg, rgba(255,255,255,0.04), rgba(15,23,42,0.9));
    padding: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.28);
    overflow: hidden;
    max-width: 100%;
    min-width: 0;
    position: relative;
  }
  .ad-slot {
    display: block;
    width: 100%;
    height: 90px;
    max-width: 100%;
    min-width: 0;
    overflow: hidden;
  }
  .ad-label {
    position: absolute;
    top: 6px;
    left: 10px;
    background: rgba(0,0,0,0.6);
    color: #cbd5e1;
    font-size: 11px;
    padding: 4px 8px;
    border-radius: 999px;
    letter-spacing: 0.04em;
  }
  @media (max-width: 640px) {
    .ad-slot { height: 60px; }
  }
  @media (max-width: 940px) {
    .qr-grid {
      grid-template-columns: 1fr;
    }
    .qr-canvas {
      min-height: 260px;
    }
  }
  @media (max-width: 540px) {
    .header-actions .btn { padding: 8px 10px; font-size: 0.85rem; }
  }
</style>
  <style id="ads-safe">
    html, body {
      max-width: 100vw;
      overflow-x: hidden;
    }
    .adsbygoogle,
    ins.adsbygoogle {
      display: block !important;
      width: 100% !important;
      max-width: 100% !important;
      min-width: 0 !important;
      box-sizing: border-box;
      overflow: hidden;
    }
    .adsbygoogle iframe,
    ins.adsbygoogle iframe {
      display: block;
      width: 100% !important;
      max-width: 100% !important;
      min-width: 0 !important;
    }
  </style>
  <style id="interaction-guard">
    * {
      -webkit-touch-callout: none;
      -webkit-user-drag: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    input,
    textarea,
    [contenteditable] {
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  </style>
  <script id="interaction-guard-js">
    document.addEventListener('contextmenu', (event) => {
      event.preventDefault();
    });
    document.addEventListener('dragstart', (event) => {
      event.preventDefault();
    });
  </script>
  <script id="ads-lazy">
    (function() {
      if (window.pixieedObserveAds) return;
      const pending = [];
      const hasObserverSupport = 'IntersectionObserver' in window;
      let observer = null;
      const isLoaded = (ins) => (
        ins.dataset.adsLazyLoaded === '1' ||
        ins.getAttribute('data-adsbygoogle-status') === 'done' ||
        ins.getAttribute('data-ad-status') === 'filled'
      );
      const loadAd = (ins) => {
        if (!ins || !(ins instanceof HTMLElement)) return;
        if (isLoaded(ins)) return;
        ins.dataset.adsLazyLoaded = '1';
        try {
          (window.adsbygoogle = window.adsbygoogle || []).push({});
        } catch (err) {
          ins.dataset.adsLazyLoaded = '';
        }
      };
      const observeAd = (ins) => {
        if (!ins || !(ins instanceof HTMLElement)) return;
        if (ins.dataset.adsLazyObserved === '1') return;
        if (isLoaded(ins)) return;
        ins.dataset.adsLazyObserved = '1';
        if (!observer) {
          if (!hasObserverSupport) {
            loadAd(ins);
          } else {
            pending.push(ins);
          }
          return;
        }
        observer.observe(ins);
      };
      const observeAds = (root) => {
        const scope = root && root.querySelectorAll ? root : document;
        scope.querySelectorAll('ins.adsbygoogle').forEach(observeAd);
      };
      window.pixieedObserveAds = observeAds;
      const setupObserver = () => {
        if (hasObserverSupport) {
          observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting || entry.intersectionRatio > 0) {
                const target = entry.target;
                if (observer) observer.unobserve(target);
                loadAd(target);
              }
            });
          }, { rootMargin: '200px 0px', threshold: 0.01 });
        }
        const queued = pending.splice(0);
        queued.forEach((ins) => {
          if (observer) {
            observer.observe(ins);
          } else {
            loadAd(ins);
          }
        });
        observeAds(document);
      };
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupObserver);
      } else {
        setupObserver();
      }
      const mo = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          mutation.addedNodes.forEach((node) => {
            if (!(node instanceof HTMLElement)) return;
            if (node.matches && node.matches('ins.adsbygoogle')) {
              observeAd(node);
              return;
            }
            if (node.querySelectorAll) {
              node.querySelectorAll('ins.adsbygoogle').forEach(observeAd);
            }
          });
        });
      });
      const startObserver = () => {
        if (!document.body) return;
        mo.observe(document.body, { childList: true, subtree: true });
      };
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', startObserver);
      } else {
        startObserver();
      }
    })();
  </script>
</head>
<body>
<div class="page">
<header aria-label="top-nav">
  <div class="header-inner">
    <a class="brand" href="../index.html">
      <span class="brand-icon"><img src="../character-dots/mao1.png" alt="logo"></span>
      <div class="brand-text">
        <p class="brand-title">PiXiEED</p>
        <p class="brand-sub">QRコードメーカー</p>
      </div>
    </a>
    <div class="header-actions">
      <a class="btn secondary" href="../projects/qr-maker/index.html">一覧へ戻る</a>
    </div>
  </div>
</header>
<section class="card">
  <h1>QRコードメーカー</h1>
  <p class="subtitle">URLやテキストを即座にQR化してPNG保存できます。</p>
</section>
<section class="card" aria-label="広告">
  <div class="ad-block">
    <ins class="adsbygoogle ad-slot"
         style="display:block"
         data-ad-client="ca-pub-9801602250480253"
         data-ad-slot="2141591954"></ins>
    <small class="ad-label">広告</small>
  </div>
  <script>
    if (window.pixieedObserveAds) {
      window.pixieedObserveAds();
    }
  </script>
</section>
<main>
<section class="qr-grid">
<section class="card">
<div class="panel-head">
<h2>1. 内容を設定</h2>
</div>
<div class="mode-section" id="qrControls">
<label for="qrInput">エンコードする内容</label>
<textarea id="qrInput" maxlength="1200" placeholder="https://example.com や テキストを入力…">https://pixieed.jp/</textarea>
<div class="meta-row" aria-live="polite">
<span>文字数: <span id="charCount">0</span> / 900 推奨</span>
<span>状態: <span class="status" id="qrStatus">未生成</span></span>
</div>
<div class="field-row">
<div>
<label for="qrLevel">誤り訂正レベル</label>
<select id="qrLevel">
<option value="M">M（標準）</option>
<option value="L">L（軽量）</option>
<option value="Q">Q（高耐性）</option>
<option value="H">H（最高耐性）</option>
</select>
</div>
</div>
<div class="field-row">
<div class="range-stack">
<label for="qrMargin">余白（クワイエットゾーン）</label>
<div class="range-wrap">
<input id="qrMargin" max="12" min="0" step="1" type="range" value="4"/>
<span class="range-value" id="qrMarginValue">4px</span>
</div>
<label for="qrSize">保存サイズ</label>
<div class="range-wrap">
<input id="qrSize" max="640" min="180" step="10" type="range" value="320"/>
<span class="range-value" id="qrSizeValue">320px</span>
</div>
</div>
<div>
<label>色</label>
<div class="color-field">
<div>
<span class="small">黒側</span>
<input id="qrDark" type="color" value="#0f172a"/>
</div>
<div>
<span class="small">背景</span>
<input id="qrLight" type="color" value="#ffffff"/>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="card qr-preview">
<div>
<h2>2. プレビュー</h2>
<p class="small">QRコードのプレビューです。</p>
</div>
<div class="qr-canvas">
<canvas height="280" id="qrCanvas" width="280"></canvas>
</div>
<div class="qr-actions" id="qrActions">
<button class="btn" id="downloadBtn" type="button">PNGを保存</button>
<button class="btn secondary" id="copyDataBtn" type="button">テキストをコピー</button>
</div>
</section>
</main>
<section class="card" aria-label="広告">
  <div class="ad-block">
    <ins class="adsbygoogle ad-slot"
         style="display:block"
         data-ad-client="ca-pub-9801602250480253"
         data-ad-slot="2141591954"></ins>
    <small class="ad-label">広告</small>
  </div>
  <script>
    if (window.pixieedObserveAds) {
      window.pixieedObserveAds();
    }
  </script>
</section>
</div>
<script src="./qrcode.min.js"></script>
<script>
  const input = document.getElementById('qrInput');
  const qrCanvas = document.getElementById('qrCanvas');
  const qrStatus = document.getElementById('qrStatus');
  const charCount = document.getElementById('charCount');
  const sizeInput = document.getElementById('qrSize');
  const sizeValue = document.getElementById('qrSizeValue');
  const marginInput = document.getElementById('qrMargin');
  const marginValue = document.getElementById('qrMarginValue');
  const levelSelect = document.getElementById('qrLevel');
  const colorDark = document.getElementById('qrDark');
  const colorLight = document.getElementById('qrLight');
  const downloadBtn = document.getElementById('downloadBtn');
  const copyBtn = document.getElementById('copyDataBtn');
  const qrActions = document.getElementById('qrActions');
  const qrControls = document.getElementById('qrControls');

  const DEFAULT_TEXT = 'https://pixieed.jp/';
  const TEXT_LIMIT = 900;
  const DISPLAY_SIZE = qrCanvas.width || 280;
  let downloadCanvas = null;

  const clamp = (val, min, max) => Math.min(Math.max(val, min), max);

  function syncLabels() {
    charCount.textContent = input.value.length;
    sizeValue.textContent = sizeInput.value + 'px';
    marginValue.textContent = marginInput.value + 'px';
  }

  async function renderQRCode() {
    if (!window.QRCode || typeof QRCode.toCanvas !== 'function') {
      qrStatus.textContent = 'QRライブラリを読み込めませんでした';
      qrStatus.style.color = '#ffa95c';
      return;
    }
    const text = (input.value.trim() || DEFAULT_TEXT).slice(0, TEXT_LIMIT);
    const width = clamp(parseInt(sizeInput.value || '320', 10), 180, 640);
    const margin = clamp(parseInt(marginInput.value || '4', 10), 0, 24);
    const options = {
      errorCorrectionLevel: levelSelect.value,
      width,
      margin,
      color: {
        dark: colorDark.value || '#0f172a',
        light: colorLight.value || '#ffffff'
      }
    };
    try {
      const displayOptions = { ...options, width: DISPLAY_SIZE };
      await QRCode.toCanvas(qrCanvas, text, displayOptions);
      const renderCanvas = document.createElement('canvas');
      await QRCode.toCanvas(renderCanvas, text, options);
      downloadCanvas = renderCanvas;
      qrStatus.textContent = '更新しました';
      qrStatus.style.color = '#7bcfff';
    } catch (err) {
      qrStatus.textContent = '生成に失敗しました';
      qrStatus.style.color = '#ffa95c';
      console.error(err);
    }
  }

  function downloadPNG() {
    const link = document.createElement('a');
    link.download = 'pixieed-qr.png';
    const sourceCanvas = downloadCanvas || qrCanvas;
    link.href = sourceCanvas.toDataURL('image/png');
    link.click();
  }

  function copyData() {
    const text = input.value.trim() || DEFAULT_TEXT;
    if (!navigator.clipboard || !navigator.clipboard.writeText) {
      qrStatus.textContent = 'クリップボード非対応の環境です';
      qrStatus.style.color = '#ffa95c';
      return;
    }
    navigator.clipboard.writeText(text).then(() => {
      qrStatus.textContent = 'テキストをコピーしました';
      qrStatus.style.color = '#7bcfff';
    }).catch(() => {
      qrStatus.textContent = 'クリップボードにコピーできませんでした';
      qrStatus.style.color = '#ffa95c';
    });
  }

  input.addEventListener('input', () => {
    syncLabels();
    renderQRCode();
  });
  [sizeInput, marginInput, levelSelect, colorDark, colorLight].forEach(el => {
    el.addEventListener('input', () => {
      syncLabels();
      renderQRCode();
    });
  });
  // 初期描画
  downloadBtn.addEventListener('click', downloadPNG);
  copyBtn.addEventListener('click', copyData);

  syncLabels();
  renderQRCode();
</script>
</body>
</html>
