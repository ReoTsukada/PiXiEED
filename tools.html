<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>PiXiEED | ãƒ„ãƒ¼ãƒ« & ã‚²ãƒ¼ãƒ </title>
  <meta name="description" content="PiXiEEDã®ãƒ„ãƒ¼ãƒ«ã¨ã‚²ãƒ¼ãƒ ã‚’ä¸€è¦§è¡¨ç¤ºã€‚ãƒ‰ãƒƒãƒˆçµµã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚„å®Ÿé¨“çš„ãªãƒ©ãƒœä½œå“ã¾ã§ã¾ã¨ã‚ã¦ãƒã‚§ãƒƒã‚¯ã§ãã¾ã™ã€‚"/>
  <link rel="icon" type="image/png" href="character-dots/mao1.png"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DotGothic16&family=Fredoka:wght@600&display=swap" rel="stylesheet">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9801602250480253" crossorigin="anonymous"></script>
  <style>
    :root{ color-scheme: dark; }
    *{
      box-sizing:border-box;
      user-select:none;
      -webkit-user-select:none;
      -ms-user-select:none;
    }
    html,body{
      overflow-x:hidden;
      max-width:100vw;
    }
    body{
      margin:0 auto;
      font-family:'Fredoka','DotGothic16',system-ui,sans-serif;
      background:radial-gradient(circle at 20% 20%, rgba(59,130,246,0.22), rgba(15,23,42,1)),
                 radial-gradient(circle at 80% 0%, rgba(236,72,153,0.18), rgba(15,23,42,1)),
                 #0b1224;
      color:#e5e7eb;
      min-height:100vh;
      padding:20px 14px 120px;
      width:100%;
      display:block;
      max-width:100vw;
      box-sizing:border-box;
    }
    .page{
      width:100%;
      max-width:min(1200px, 100vw);
      display:grid;
      gap:14px;
      position:relative;
      margin:0 auto;
      box-sizing:border-box;
    }
    header{
      position:sticky;
      top:0;
      z-index:70;
      background:rgba(11,18,36,0.94);
      backdrop-filter:blur(8px);
      border-bottom:1px solid rgba(255,255,255,0.08);
      margin:-20px -14px 8px;
      padding:10px 14px;
      width:calc(100% + 28px);
      max-width:100vw;
      box-sizing:border-box;
    }
    .header-inner{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      width:100%;
      max-width:1200px;
      margin:0 auto;
      box-sizing:border-box;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:800;
      letter-spacing:0.01em;
      background:none;
      border:0;
      padding:0;
      cursor:pointer;
      color:#f9fafb;
      text-decoration:none;
    }
    .brand-icon{
      width:34px;
      height:34px;
      border-radius:10px;
      background:rgba(255,255,255,0.12);
      padding:4px;
      border:1px solid rgba(255,255,255,0.2);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .brand-icon img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
    }
    .brand-text{ display:flex; flex-direction:column; gap:2px; }
    .brand-title{ margin:0; font-size:16px; color:#f9fafb; }
    .brand-sub{ margin:0; font-size:12px; color:#9ca3af; }
    h1{ margin:0; font-size:22px; }
    .subtitle{ margin:0; color:#cbd5e1; font-size:12px; }
    .card{
      background:rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.12);
      border-radius:12px;
      padding:16px;
      box-shadow:0 10px 30px rgba(0,0,0,0.3);
    }
    .filters{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:center;
    }
    .chip{
      border:1px solid rgba(255,255,255,0.18);
      background:transparent;
      color:#e5e7eb;
      border-radius:12px;
      padding:8px 12px;
      font-weight:700;
      cursor:pointer;
    }
    .chip.is-active{
      background:linear-gradient(135deg,#ff719a,#ff9f43);
      border-color:transparent;
      color:#0b1224;
    }
    .search-box{
      width:100%;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(0,0,0,0.35);
      color:#f9fafb;
      padding:10px 12px;
      font-size:14px;
      font-family:'DotGothic16', monospace;
    }
    .grid{
      display:grid;
      gap:14px;
      grid-template-columns:repeat(3, minmax(0, 1fr));
    }
    .ad-inline{
      grid-column:1 / -1;
    }
    .ad-block{
      border:1px dashed rgba(255,255,255,0.2);
      border-radius:12px;
      background:linear-gradient(150deg, rgba(255,255,255,0.04), rgba(15,23,42,0.9));
      padding:12px;
      box-shadow:0 10px 30px rgba(0,0,0,0.28);
      overflow:hidden;
    }
    .ad-slot{
      display:block;
      width:100%;
      height:90px;
    }
    .ad-label{
      position:absolute;
      top:6px;
      left:10px;
      background:rgba(0,0,0,0.6);
      color:#cbd5e1;
      font-size:11px;
      padding:4px 8px;
      border-radius:999px;
      letter-spacing:0.06em;
      display:inline-flex;
      align-items:center;
    }
    @media(max-width:640px){
      .ad-slot{ height:60px; }
    }
    .item{
      background:rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.12);
      border-radius:0 0 10px 10px;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      text-decoration:none;
      color:inherit;
      box-shadow:0 8px 24px rgba(0,0,0,0.25);
      transition:transform 0.1s ease, box-shadow 0.1s ease;
    }
    .item:hover{ transform:translateY(-1px); box-shadow:0 12px 26px rgba(0,0,0,0.3); }
    .thumb{
      position:relative;
      aspect-ratio:4/3;
      background:rgba(0,0,0,0.25);
      overflow:hidden;
    }
    .thumb img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
      background:transparent;
      -webkit-user-drag:none;
      user-select:none;
    }
    .tag{
      position:absolute;
      top:8px;
      left:8px;
      padding:4px 8px;
      border-radius:999px;
      font-size:11px;
      font-weight:800;
      color:#0b1224;
      background:rgba(255,255,255,0.9);
    }
    .body{
      padding:10px 12px 12px;
      display:grid;
      gap:6px;
      flex:1;
    }
    .title{ margin:0; font-size:15px; color:#f9fafb; }
    .desc{ margin:0; font-size:12px; color:#cbd5e1; line-height:1.5; }
    .bottom-nav{
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      height:68px;
      background:rgba(11,18,36,0.96);
      border-top:1px solid rgba(255,255,255,0.08);
      display:flex;
      justify-content:space-around;
      align-items:center;
      z-index:90;
      backdrop-filter:blur(8px);
    }
    .bottom-nav__item{
      flex:1;
      text-align:center;
      color:#cbd5e1;
      text-decoration:none;
      font-weight:700;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:4px;
      font-size:12px;
      padding:8px 0;
    }
    .bottom-nav__item .icon{ font-size:18px; }
    .bottom-nav__item.is-active{ color:#f9fafb; }
    .auth-panel{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(0,0,0,0.65);
      backdrop-filter:blur(4px);
      padding:16px;
      z-index:110;
    }
    .auth-panel.is-open{ display:flex; }
    .auth-card{
      width:100%;
      max-width:420px;
      max-height:90vh;
      background:rgba(15,23,42,0.95);
      border:1px solid rgba(255,255,255,0.14);
      border-radius:16px;
      padding:16px;
      box-shadow:0 18px 40px rgba(0,0,0,0.45);
      display:grid;
      gap:12px;
      box-sizing:border-box;
      overflow:hidden;
    }
    .auth-input{
      width:100%;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(255,255,255,0.05);
      color:#fff;
      padding:10px 12px;
      font-size:14px;
    }
    .auth-btn{
      border:1px solid rgba(255,255,255,0.2);
      background:linear-gradient(135deg,#4f46e5,#7c3aed);
      color:#fff;
      border-radius:12px;
      padding:10px 14px;
      font-weight:800;
      cursor:pointer;
      text-align:center;
    }
    .close-btn{
      border:1px solid rgba(255,255,255,0.2);
      background:rgba(255,255,255,0.08);
      color:#fff;
      border-radius:8px;
      padding:6px 10px;
      cursor:pointer;
    }
    .profile-block{
      display:grid;
      gap:10px;
      padding:10px;
      border-radius:12px;
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.08);
    }
    .avatar-grid{
      display:grid;
      grid-template-columns:repeat(6, minmax(0, 1fr));
      gap:4px;
      max-height:220px;
      overflow-y:auto;
      padding-right:4px;
      -webkit-overflow-scrolling:touch;
    }
    .avatar-option{
      width:100%;
      aspect-ratio:1;
      border-radius:12px;
      border:2px solid transparent;
      background:rgba(0,0,0,0.7);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:border-color 0.15s ease, transform 0.1s ease;
    }
    .avatar-option.is-active{
      border-color:#7c3aed;
      transform:translateY(-1px);
    }
    .helper{ color:#cbd5e1; font-size:12px; margin:0; }
  </style>
</head>
<body>
  <div class="page">
    <header aria-label="top-nav">
      <div class="header-inner">
        <button class="brand" id="openProfilePanel" type="button">
          <span class="brand-icon" id="brandAvatar"><img src="character-dots/mao1.png" alt="logo"></span>
          <div class="brand-text">
            <p class="brand-title">PiXiEED</p>
            <p class="brand-sub" id="brandUser">ãƒ¦ãƒ¼ã‚¶ãƒ¼</p>
          </div>
        </button>
        <div></div>
      </div>
    </header>
    <section class="card">
      <h1>ãƒ„ãƒ¼ãƒ« & ã‚²ãƒ¼ãƒ </h1>
      <p class="subtitle">ãƒ‰ãƒƒãƒˆçµµåˆ¶ä½œå‘ã‘ã®ãƒ„ãƒ¼ãƒ«ã¨ã‚²ãƒ¼ãƒ ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚æ¤œç´¢ã‚„ã‚«ãƒ†ã‚´ãƒªã§çµã‚Šè¾¼ã‚ã¾ã™ã€‚</p>
    </section>
    <section class="card">
      <div class="filters">
        <button class="chip is-active" data-filter="all" type="button">ã™ã¹ã¦</button>
        <button class="chip" data-filter="tool" type="button">ãƒ„ãƒ¼ãƒ«</button>
        <button class="chip" data-filter="game" type="button">ã‚²ãƒ¼ãƒ </button>
        <input class="search-box" id="searchBox" type="search" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¢ã™ï¼ˆä¾‹: QR, 16x16ï¼‰" aria-label="æ¤œç´¢">
      </div>
    </section>
    <section class="card" aria-label="åºƒå‘Š">
      <div class="ad-block" style="position:relative;">
        <ins class="adsbygoogle ad-slot"
             style="display:block"
             data-ad-client="ca-pub-9801602250480253"
             data-ad-slot="2141591954"
             data-ad-format="horizontal"
             data-full-width-responsive="true"></ins>
        <small class="ad-label">åºƒå‘Š</small>
      </div>
    </section>
    <section class="card">
      <div class="grid" id="toolsGrid"></div>
    </section>
  </div>
  <nav class="bottom-nav">
    <a class="bottom-nav__item" data-tab="home" href="./index.html">
      <span class="icon">ğŸ </span><span>ãƒ›ãƒ¼ãƒ </span>
    </a>
    <a class="bottom-nav__item" data-tab="contest" href="contest/index.html">
      <span class="icon">ğŸ¨</span><span>ã‚³ãƒ³ãƒ†ã‚¹ãƒˆ</span>
    </a>
    <a class="bottom-nav__item is-active" data-tab="tools" href="tools.html">
      <span class="icon">ğŸ› ï¸</span><span>ãƒ„ãƒ¼ãƒ«/ã‚²ãƒ¼ãƒ </span>
    </a>
    <a class="bottom-nav__item" data-tab="portfolio" href="portfolio/index.html">
      <span class="icon">ğŸ¢</span><span>ä¼æ¥­å‘ã‘</span>
    </a>
  </nav>

  <div class="auth-panel" id="authPanel" aria-hidden="true">
    <div class="auth-card">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
        <h3 style="margin:0;font-size:16px;color:#f9fafb;">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h3>
        <button class="close-btn" type="button" id="closeAuthPanel">é–‰ã˜ã‚‹</button>
      </div>
      <div class="profile-block">
        <label style="display:flex; flex-direction:column; gap:6px;">
          <span style="font-weight:700; color:#e5e7eb;">ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ </span>
          <input class="auth-input" id="profileNickname" type="text" placeholder="ãªã¾ãˆ" maxlength="32">
        </label>
        <div>
          <p class="helper" style="margin:0 0 6px;">ã‚¢ã‚¤ã‚³ãƒ³</p>
          <div class="avatar-grid" id="avatarGrid"></div>
        </div>
        <button class="auth-btn" id="saveProfile" type="button">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ä¿å­˜</button>
      </div>
      <div class="profile-block">
        <p class="helper" style="margin:0 0 6px;">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç´ä»˜ã‘</p>
        <p class="helper" id="linkedEmail" style="margin:0 0 6px; display:block;">ç´ä»˜ã‘ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ã¯ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã§è¡Œã£ã¦ãã ã•ã„</p>
        <button class="auth-btn" id="authBtn" type="button">ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³</button>
      </div>
      <p class="helper" id="authStatus"></p>
    </div>
  </div>

  <script>
    (function(){
      function loadNickname(){ try{ return localStorage.getItem('pixieed_nickname') || ''; }catch(_){ return ''; } }
      function saveNickname(name){ try{ localStorage.setItem('pixieed_nickname', name); }catch(_){ } }
      function loadAvatar(){ try{ return localStorage.getItem('pixieed_avatar') || 'mao'; }catch(_){ return 'mao'; } }
      function saveAvatar(id){ try{ localStorage.setItem('pixieed_avatar', id); }catch(_){ } }
      const AVATARS = {
        mao:'character-dots/mao1.png',
        jerin1:'character-dots/Jerin1.png',
        jerin2:'character-dots/Jerin2.png',
        jerin3:'character-dots/Jerin3.png',
        jerin4:'character-dots/Jerin4.png',
        jerin5:'character-dots/Jerin5.png',
        jerin6:'character-dots/Jerin6.png',
        jerin7:'character-dots/Jerin7.png',
        jerin8:'character-dots/Jerin8.png',
        jellnall1:'character-dots/JELLNALL1.png',
        jellnall2:'character-dots/JELLNALL2.png',
        jellnall3:'character-dots/JELLNALL3.png',
        jellnall4:'character-dots/JELLNALL4.png',
        jellnall5:'character-dots/JELLNALL5.png',
        jellnall6:'character-dots/JELLNALL6.png',
        jellnall7:'character-dots/JELLNALL7.png',
        jellnall8:'character-dots/JELLNALL8.png',
        jellnall9:'character-dots/JELLNALL9.png',
        jellnall10:'character-dots/JELLNALL10.png',
        jellnall11:'character-dots/JELLNALL11.png',
        jellnall12:'character-dots/JELLNALL12.png',
        jellnall13:'character-dots/JELLNALL13.png',
        jellnall14:'character-dots/JELLNALL14.png',
        jellnall15:'character-dots/JELLNALL15.png',
        jellnall16:'character-dots/JELLNALL16.png',
        jellnall17:'character-dots/JELLNALL17.png',
        jellnall18:'character-dots/JELLNALL18.png',
        jellnall19:'character-dots/JELLNALL19.png',
        baburin:'character-dots/baburinpng.png'
      };

      const ITEMS = [
        {
          id:'maoitu',
          title:'é­”ç‹æ§˜!!ã„ã¤ã¾ã§ã‚ˆã‘ã‚Œã°ã„ã„ã§ã™ã‹!?',
          desc:'é¿ã‘ç¶šã‘ã‚‹ã‚¹ãƒªãƒ«ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§æ¥½ã—ã‚ã‚‹äººæ°—No.1ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€‚',
          tag:'Game',
          category:'game',
          href:'projects/maoitu/index.html',
          image:'maoitu/ogp.png'
        },
        {
          id:'pixfind',
          title:'PiXFiNDï¼ˆèª¿æ•´ä¸­ï¼‰',
          desc:'ãƒ‰ãƒƒãƒˆçµµã«ç‰¹åŒ–ã—ãŸé–“é•ã„æ¢ã—ã€‚ã‚¢ã‚¯ã‚»ã‚¹ã‚³ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™ã€‚',
          tag:'Game',
          category:'game',
          href:'projects/pixfind/index.html',
          image:'pixfind/ogp.png'
        },
        {
          id:'pixiedraw',
          title:'PiXiEEDraw',
          desc:'ãƒ–ãƒ©ã‚¦ã‚¶ã ã‘ã§å‹•ãæœ¬æ ¼ãƒ‰ãƒƒãƒˆã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã€‚é…è‰²ãƒ»ä¿å­˜ãƒ»å…¬é–‹ã«å¯¾å¿œã€‚',
          tag:'Tool',
          category:'tool',
          href:'projects/pixiedraw/index.html',
          image:'pixiedraw/ogp-app.png'
        },
        {
          id:'jerin-maker',
          title:'PiXiEEDraw Liteï¼ˆãƒ”ã‚¯ãƒ‰ãƒ©ï¼‰',
          desc:'16Ã—16å›ºå®šã®ãƒ©ã‚¤ãƒˆç‰ˆãƒ‰ãƒƒãƒˆãƒ„ãƒ¼ãƒ«ã€‚ã‚¸ã‚§ãƒªãƒ³ã®ä¸‹çµµä»˜ãã§ã‚µã‚¯ãƒƒã¨æã‘ã¾ã™ã€‚',
          tag:'Tool',
          category:'tool',
          href:'projects/jerin-maker/index.html',
          image:'jerin-maker/ogp-app.png'
        },
        {
          id:'pixiee-lens',
          title:'PiXiEELENS',
          desc:'å…¨ç”»é¢ã‚«ãƒ¡ãƒ©ã®ãƒ©ãƒœç‰ˆã€‚ãƒ‰ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã¨ãƒ‘ãƒ¬ãƒƒãƒˆèª­è¾¼ã§é…è‰²ã‚’éŠã¹ã¾ã™ã€‚',
          tag:'Tool',
          category:'tool',
          href:'projects/pixiee-lens/index.html',
          image:'pixiee-lens/ogp.png'
        },
        {
          id:'qr-maker',
          title:'QRã‚³ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼',
          desc:'è‰²ãƒ»ä½™ç™½ãƒ»èª¤ã‚Šè¨‚æ­£ã‚’æŒ‡å®šã—ã¦QRåŒ–ã€‚ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§å³åº§ã«PNGä¿å­˜ã§ãã¾ã™ã€‚',
          tag:'Tool',
          category:'tool',
          href:'projects/qr-maker/index.html',
          image:'qr-maker/qrogp.png'
        }
      ];

      function applyAvatar(){
        const brand = document.getElementById('brandAvatar');
        const brandUser = document.getElementById('brandUser');
        const avatar = loadAvatar();
        const src = AVATARS[avatar] || AVATARS.mao;
        if(brand){
          brand.innerHTML = `<img src="${src}" alt="avatar">`;
        }
        const nick = loadNickname();
        if(brandUser){
          brandUser.textContent = nick || 'ãƒ¦ãƒ¼ã‚¶ãƒ¼';
        }
      }

      function renderAvatarChoices(){
        const grid = document.getElementById('avatarGrid');
        if(!grid) return;
        grid.innerHTML = '';
        const current = loadAvatar();
        Object.entries(AVATARS).forEach(([id, src]) => {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = `avatar-option${current === id ? ' is-active' : ''}`;
          btn.style.background = 'rgba(0,0,0,0.7)';
          const im = document.createElement('img');
          im.src = src;
          im.alt = id;
          im.style.width = '80%';
          im.style.height = '80%';
          im.style.objectFit = 'contain';
          im.style.pointerEvents = 'none';
          im.style.imageRendering = 'pixelated';
          im.style.imageRendering = 'crisp-edges';
          btn.appendChild(im);
          btn.addEventListener('click', () => {
            saveAvatar(id);
            renderAvatarChoices();
            applyAvatar();
          });
          grid.appendChild(btn);
        });
      }

      function setupProfileModal(){
        const openBtn = document.getElementById('openProfilePanel');
        const panel = document.getElementById('authPanel');
        const closeBtn = document.getElementById('closeAuthPanel');
        const saveBtn = document.getElementById('saveProfile');
        const nickInput = document.getElementById('profileNickname');
        const authBtn = document.getElementById('authBtn');
        const status = document.getElementById('authStatus');
        const toggle = (open) => {
          if(!panel) return;
          if(open){
            if(nickInput) nickInput.value = loadNickname();
            renderAvatarChoices();
            panel.classList.add('is-open');
            panel.setAttribute('aria-hidden','false');
          }else{
            panel.classList.remove('is-open');
            panel.setAttribute('aria-hidden','true');
          }
        };
        if(openBtn) openBtn.addEventListener('click', () => toggle(true));
        if(closeBtn) closeBtn.addEventListener('click', () => toggle(false));
        if(panel){ panel.addEventListener('click', (e) => { if(e.target === panel) toggle(false); }); }
        if(saveBtn){
          saveBtn.addEventListener('click', () => {
            const nick = (nickInput?.value || '').trim();
            if(nick){ saveNickname(nick); }
            applyAvatar();
            if(status) status.textContent = 'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ä¿å­˜ã—ã¾ã—ãŸ';
          });
        }
        if(authBtn){
          authBtn.addEventListener('click', () => {
            window.location.href = 'contest/index.html#auth';
          });
        }
      }

      function renderList(filter, keyword){
        const wrap = document.getElementById('toolsGrid');
        if(!wrap) return;
        const kw = (keyword || '').toLowerCase();
        const list = ITEMS.filter(item => {
          const matchFilter = filter === 'all' || item.category === filter;
          const matchKw = !kw || item.title.toLowerCase().includes(kw) || item.desc.toLowerCase().includes(kw) || item.tag.toLowerCase().includes(kw);
          return matchFilter && matchKw;
        });
        if(!list.length){
          wrap.innerHTML = '<p class="helper" style="text-align:center;">è©²å½“ã™ã‚‹ä½œå“ãŒã‚ã‚Šã¾ã›ã‚“</p>';
          return;
        }
        wrap.innerHTML = '';
        const AD_SLOTS = ['2141591954','9073878884','2261515379'];
        const createAd = (slotId) => {
          const ad = document.createElement('div');
          ad.className = 'ad-block ad-inline';
          ad.innerHTML = `
            <ins class="adsbygoogle ad-slot"
                 style="display:block"
                 data-ad-client="ca-pub-9801602250480253"
                 data-ad-slot="${slotId}"
                 data-ad-format="horizontal"
                 data-full-width-responsive="true"></ins>
          `;
          return ad;
        };
        list.forEach((item, idx) => {
          const card = document.createElement('a');
          card.className = 'item';
          card.href = item.href;
          card.innerHTML = `
            <div class="thumb">
              <img src="${item.image}" alt="${item.title}" draggable="false">
              <span class="tag">${item.tag}</span>
            </div>
            <div class="body">
              <p class="title">${item.title}</p>
              <p class="desc">${item.desc}</p>
            </div>
          `;
          wrap.appendChild(card);
          if((idx + 1) % 6 === 0){
            const slotId = AD_SLOTS[(idx / 6) % AD_SLOTS.length | 0];
            wrap.appendChild(createAd(slotId));
          }
        });
        try{
          const ads = document.querySelectorAll('.adsbygoogle');
          if(ads.length){
            ads.forEach(() => (window.adsbygoogle = window.adsbygoogle || []).push({}));
          }
        }catch(e){
          console.warn('ads render skipped', e);
        }
      }

      function setupFilters(){
        let currentFilter = 'all';
        let currentKw = '';
        const chips = document.querySelectorAll('.chip');
        chips.forEach(chip => {
          chip.addEventListener('click', () => {
            currentFilter = chip.dataset.filter || 'all';
            chips.forEach(c => c.classList.toggle('is-active', c === chip));
            renderList(currentFilter, currentKw);
          });
        });
        const search = document.getElementById('searchBox');
        if(search){
          search.addEventListener('input', () => {
            currentKw = search.value;
            renderList(currentFilter, currentKw);
          });
        }
        renderList(currentFilter, currentKw);
      }

      function setActiveNav(){
        document.querySelectorAll('.bottom-nav__item').forEach(item => {
          item.classList.toggle('is-active', item.dataset.tab === 'tools');
        });
      }

      document.addEventListener('DOMContentLoaded', () => {
        applyAvatar();
        setupProfileModal();
        setupFilters();
        setActiveNav();
        try{
          const ads = document.querySelectorAll('.adsbygoogle');
          if(ads.length){
            ads.forEach(() => (window.adsbygoogle = window.adsbygoogle || []).push({}));
          }
        }catch(e){
          console.warn('ads render skipped', e);
        }
        document.addEventListener('contextmenu', (e) => {
          if(e.target && e.target.tagName === 'IMG'){
            e.preventDefault();
          }
        });
        document.addEventListener('dragstart', (e) => {
          if(e.target && e.target.tagName === 'IMG'){
            e.preventDefault();
          }
        });
      });
    })();
  </script>
</body>
</html>
